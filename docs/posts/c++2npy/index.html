<!DOCTYPE html>
<html lang="jp">

<head><title>
    C&#43;&#43;配列を.npy形式で保存したい癖の強いあなたへ。 | 
    
    TH&#39;s Blog</title>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<meta name="description" content="この記事では，C&#43;&#43;で数値シミュレーションを行っている方向けに，Python の numpy で使える .npy 形式で C&#43;&#43;配列 vector を保存する方法を紹介します．
    ">


<meta property="og:title" content="C&#43;&#43;配列を.npy形式で保存したい癖の強いあなたへ。" />
<meta property="og:description" content="この記事では，C&#43;&#43;で数値シミュレーションを行っている方向けに，Python の numpy で使える .npy 形式で C&#43;&#43;配列 vector を保存する方法を紹介します．" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://t0m0ya1997.github.io/whoami/posts/c&#43;&#43;2npy/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-01-24T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-01-24T00:00:00+00:00" />


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="C&#43;&#43;配列を.npy形式で保存したい癖の強いあなたへ。"/>
<meta name="twitter:description" content="この記事では，C&#43;&#43;で数値シミュレーションを行っている方向けに，Python の numpy で使える .npy 形式で C&#43;&#43;配列 vector を保存する方法を紹介します．"/>

<meta itemprop="name" content="C&#43;&#43;配列を.npy形式で保存したい癖の強いあなたへ。">
<meta itemprop="description" content="この記事では，C&#43;&#43;で数値シミュレーションを行っている方向けに，Python の numpy で使える .npy 形式で C&#43;&#43;配列 vector を保存する方法を紹介します．"><meta itemprop="datePublished" content="2022-01-24T00:00:00+00:00" />
<meta itemprop="dateModified" content="2022-01-24T00:00:00+00:00" />
<meta itemprop="wordCount" content="4817">
<meta itemprop="keywords" content="Programming,C&#43;&#43;,Python," />
<link rel="canonical" href="https://t0m0ya1997.github.io/whoami/posts/c&#43;&#43;2npy/" />

<link rel="icon" type="image/png" href="https://t0m0ya1997.github.io/whoamiimage/favicon.ico">

<link rel="stylesheet" href="/whoami/css/font-awesome.min.css">
<link rel="stylesheet" href="/whoami/css/bulma.min.css">





<script src=/whoami/js/ramium.js></script>
<link rel="stylesheet" href=/whoami/css/ramium.css>




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"
    integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js"
    integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz"
    crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js"
    integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
              
              
              delimiters: [
                  {left: '$$', right: '$$', display: true},
                  {left: '$', right: '$', display: false},
                  {left: '\\(', right: '\\)', display: false},
                  {left: '\\[', right: '\\]', display: true}
              ],
              
              throwOnError : false
            });
        });
    </script>


</head>

<body><nav class="navbar is-dark" role="navigation" aria-label="main navigation">
  <div class="navbar-brand">
    <a class="navbar-item" href=/whoami/>
      
      <strong>TH&#39;s Blog </strong>
      
    </a>

    <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false"
      data-target="navbarBasicExample">
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
    </a>
  </div>

  <div id="navbarBasicExample" class="navbar-menu">
    <div class="navbar-start">
      
      
      <a class="navbar-item" href="/whoami/">Home</a>
      
      
      
      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link">This Blog</a>
        <div class="navbar-dropdown">
          
          <a class="navbar-item" href="/whoami/tags/">All Tags</a>
          
          <a class="navbar-item" href="/whoami/sections/">All Sections</a>
          
          <a class="navbar-item" href="/whoami/posts/">All Posts</a>
          
        </div>
      </div>
      
      
      
      <a class="navbar-item" href="/whoami/author/">Author</a>
      
      
    </div>

    <div class="navbar-end">
      
      <a class="navbar-item navgithub" href="https://github.com/rafed/ramium/" target="_blank">
        <i class="fa fa-github fa-2x"></i>
      </a>
      

      
    </div>
  </div>
</nav><div class="columns is-centered">
        <div id="page-body" class="column is-7">

<div class="content blog">
    <h1>C&#43;&#43;配列を.npy形式で保存したい癖の強いあなたへ。</h1>

    <div id="infobar" class="level is-mobile">
        <div class="level-left">
            
            <div class="level-item">
                <p class="subtitle info date">Jan 24, 2022
                </p>
            </div>
            

            <div class="level-item">
                <p class="subtitle info">
                    31 mins read
                </p>
            </div>
        </div>
        <div class="level-right is-hidden-touch">
            <div class="tags">
                
                <a class="tag is-dark is-rounded" href="/whoami/tags/programming">Programming</a>
                
                <a class="tag is-dark is-rounded" href="/whoami/tags/c&#43;&#43;">C&#43;&#43;</a>
                
                <a class="tag is-dark is-rounded" href="/whoami/tags/python">Python</a>
                
            </div>
        </div>
    </div>

    <div class="tags is-hidden-desktop">
        
        <a class="tag is-dark is-rounded" href="/whoami/tags/programming">Programming</a>
        
        <a class="tag is-dark is-rounded" href="/whoami/tags/c&#43;&#43;">C</a>
        
        <a class="tag is-dark is-rounded" href="/whoami/tags/python">Python</a>
        
    </div>

    <div class="blog-text">
        
        <figure>
            <img src="/whoami/image/profile.jpg">
        </figure>
        

        <p>この記事では，<code>C++</code>で数値シミュレーションを行っている方向けに，<code>Python</code> の <code>numpy</code> で使える<code>.npy</code>形式で C++配列<code>vector</code> を保存する方法を紹介します．
結論だけをお求めの方は最下部に <code>numpy.hpp</code> を掲載しておりますので，そちらをコピペなりしてお手元で使ってみてください．</p>
<p>私はMCMCなどの数値シミュレーションを行う際に，計算時間の観点から<code>Python</code>ではなく<code>C++</code>を使っています．
しかしながら，実験結果の可視化を行うにはバイナリコードで結果を書き出して，<code>gnuplot</code>を用いるなど，私的には敷居が高く感じています．
一方で，<code>Python</code>の<code>matplotlib</code>というライブラリを用いると，その学習コストが低い反面，論文にも使えるような，それっぽい図が簡単に描けてしまいます．
そこで，<code>C++</code>で作成したvector（多次元も含む）を，<code>Python</code>の<code>numpy</code>で簡単に読み書きができる<code>.npy</code>形式でデータのやり取りができると最高なのです．</p>
<p>今回紹介するのは，C++ の vector を<code>.npy</code>形式で保存する<code>SaveNpy</code>関数と，Python を用いて生成した<code>.npy</code>形式で保存された多次元配列を C++ 内で多次元 vector として読み込む<code>LoadNpy</code>関数です．
実装は<a href="https://qiita.com/ka_na_ta_n/items/608c7df3128abbf39c89">こちらの記事</a>を大いに参考にさせていただきました．
注意としては，4次元配列までしか対応していないです．
私の場合，4次元で事足りているのですが，4次元よりも大きな次元の配列の入出力が必要でしたら，コードを参考に書き換えてみてください．
また，私は<code>int</code>型を使用することもあるため，上記の記事に<code>int</code>型の入出力を加えたものを紹介します．</p>
<details>
<summary>numpy.hpp</summary>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C++" data-lang="C++"><span style="color:#75715e">#pragma once
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;fstream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;iostream&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;string&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;cstdio&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;vector&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">namespace</span> {
    <span style="color:#66d9ef">template</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> ... Args<span style="color:#f92672">&gt;</span>
    std<span style="color:#f92672">::</span>string FormatString(<span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">&amp;</span> fmt, Args ... args)
    {
        size_t len <span style="color:#f92672">=</span> std<span style="color:#f92672">::</span>snprintf(<span style="color:#66d9ef">nullptr</span>, <span style="color:#ae81ff">0</span>, fmt.c_str(), args ...);
        std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">char</span><span style="color:#f92672">&gt;</span> buf(len <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>);
        std<span style="color:#f92672">::</span>snprintf(<span style="color:#f92672">&amp;</span>buf[<span style="color:#ae81ff">0</span>], len <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>, fmt.c_str(), args ...);
        <span style="color:#66d9ef">return</span> std<span style="color:#f92672">::</span>string(<span style="color:#f92672">&amp;</span>buf[<span style="color:#ae81ff">0</span>], <span style="color:#f92672">&amp;</span>buf[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">+</span> len);
    }
}

<span style="color:#75715e">// 1次元配列の読み込み
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">LoadNpy</span>(<span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">&amp;</span>filePath, std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;&amp;</span>data)
{
    std<span style="color:#f92672">::</span>ifstream fs(filePath.c_str(), std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>in <span style="color:#f92672">|</span> std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>binary);
    <span style="color:#66d9ef">if</span> (fs.fail()) { <span style="color:#66d9ef">return</span> false; }

    <span style="color:#75715e">// header 6 byte = 0x93NUMPY
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> magicString[<span style="color:#ae81ff">6</span>];
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>magicString, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">6</span>);
    <span style="color:#66d9ef">if</span> ((<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span>)(magicString[<span style="color:#ae81ff">0</span>]) <span style="color:#f92672">!=</span> (<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span>)<span style="color:#ae81ff">0x93</span> <span style="color:#f92672">||</span>
        magicString[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;N&#39;</span> <span style="color:#f92672">||</span> magicString[<span style="color:#ae81ff">2</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;U&#39;</span> <span style="color:#f92672">||</span>
        magicString[<span style="color:#ae81ff">3</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;M&#39;</span> <span style="color:#f92672">||</span> magicString[<span style="color:#ae81ff">4</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;P&#39;</span> <span style="color:#f92672">||</span>
        magicString[<span style="color:#ae81ff">5</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;Y&#39;</span>) {
        std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;[ERROR] Not NPY file&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
        <span style="color:#66d9ef">return</span> false;
    }

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> major, minor;
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>major, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">1</span>);
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>minor, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">1</span>);

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span> headerLength;
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>headerLength, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span>));

    <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> header <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">char</span>[headerLength];
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)header, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerLength);

    <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerString(header);

    <span style="color:#66d9ef">bool</span> checkType <span style="color:#f92672">=</span> false;
    {
        <span style="color:#66d9ef">const</span> size_t pos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;&#39;descr&#39;: &#34;</span>);
        <span style="color:#66d9ef">if</span> (pos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
            <span style="color:#66d9ef">const</span> size_t typePos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;&#39;&lt;i4&#39;&#34;</span>, pos);
            <span style="color:#66d9ef">if</span> (typePos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
                checkType <span style="color:#f92672">=</span> true;
            } <span style="color:#66d9ef">else</span> {
                std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;[ERROR] Type Error.&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
            }
        }
    }

    <span style="color:#66d9ef">bool</span> checkAxis <span style="color:#f92672">=</span> false;
    <span style="color:#66d9ef">int</span> axis1 <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
    {
        <span style="color:#66d9ef">const</span> size_t pos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;&#39;shape&#39;: &#34;</span>);
        <span style="color:#66d9ef">if</span> (pos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
            <span style="color:#66d9ef">const</span> size_t shapeStartPos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;(&#34;</span>, pos);
            <span style="color:#66d9ef">const</span> size_t shapeEndPos   <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;)&#34;</span>, pos);

            <span style="color:#66d9ef">if</span> (shapeStartPos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos <span style="color:#f92672">&amp;&amp;</span> shapeEndPos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
                <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string shapeString <span style="color:#f92672">=</span> headerString.substr(shapeStartPos, (shapeEndPos <span style="color:#f92672">-</span> shapeStartPos) <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>);
                <span style="color:#f92672">::</span>sscanf(shapeString.c_str(), <span style="color:#e6db74">&#34;(%d,)&#34;</span>, <span style="color:#f92672">&amp;</span>axis1);

                <span style="color:#66d9ef">if</span> (axis1 <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
                    checkAxis <span style="color:#f92672">=</span> true;
                } <span style="color:#66d9ef">else</span> {
                    std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;[ERROR] Axis Error.&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
                }
            }
        }
    }

    <span style="color:#66d9ef">if</span> (checkType <span style="color:#f92672">&amp;&amp;</span> checkAxis) {
        data.resize(axis1);

        fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>data[<span style="color:#ae81ff">0</span>], <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">float</span>) <span style="color:#f92672">*</span> axis1);
    }

    <span style="color:#66d9ef">delete</span> header;
    fs.close();

    <span style="color:#66d9ef">return</span> true;
}

<span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">LoadNpy</span>(<span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">&amp;</span>filePath, std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">float</span><span style="color:#f92672">&gt;&amp;</span>data)
{
    std<span style="color:#f92672">::</span>ifstream fs(filePath.c_str(), std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>in <span style="color:#f92672">|</span> std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>binary);
    <span style="color:#66d9ef">if</span> (fs.fail()) { <span style="color:#66d9ef">return</span> false; }

    <span style="color:#75715e">// header 6 byte = 0x93NUMPY
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> magicString[<span style="color:#ae81ff">6</span>];
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>magicString, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">6</span>);
    <span style="color:#66d9ef">if</span> ((<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span>)(magicString[<span style="color:#ae81ff">0</span>]) <span style="color:#f92672">!=</span> (<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span>)<span style="color:#ae81ff">0x93</span> <span style="color:#f92672">||</span>
        magicString[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;N&#39;</span> <span style="color:#f92672">||</span> magicString[<span style="color:#ae81ff">2</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;U&#39;</span> <span style="color:#f92672">||</span>
        magicString[<span style="color:#ae81ff">3</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;M&#39;</span> <span style="color:#f92672">||</span> magicString[<span style="color:#ae81ff">4</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;P&#39;</span> <span style="color:#f92672">||</span>
        magicString[<span style="color:#ae81ff">5</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;Y&#39;</span>) {
        std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;[ERROR] Not NPY file&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
        <span style="color:#66d9ef">return</span> false;
    }

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> major, minor;
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>major, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">1</span>);
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>minor, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">1</span>);

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span> headerLength;
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>headerLength, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span>));

    <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> header <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">char</span>[headerLength];
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)header, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerLength);

    <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerString(header);

    <span style="color:#66d9ef">bool</span> checkType <span style="color:#f92672">=</span> false;
    {
        <span style="color:#66d9ef">const</span> size_t pos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;&#39;descr&#39;: &#34;</span>);
        <span style="color:#66d9ef">if</span> (pos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
            <span style="color:#66d9ef">const</span> size_t typePos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;&#39;&lt;f4&#39;&#34;</span>, pos);
            <span style="color:#66d9ef">if</span> (typePos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
                checkType <span style="color:#f92672">=</span> true;
            } <span style="color:#66d9ef">else</span> {
                std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;[ERROR] Type Error.&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
            }
        }
    }

    <span style="color:#66d9ef">bool</span> checkAxis <span style="color:#f92672">=</span> false;
    <span style="color:#66d9ef">int</span> axis1 <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
    {
        <span style="color:#66d9ef">const</span> size_t pos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;&#39;shape&#39;: &#34;</span>);
        <span style="color:#66d9ef">if</span> (pos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
            <span style="color:#66d9ef">const</span> size_t shapeStartPos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;(&#34;</span>, pos);
            <span style="color:#66d9ef">const</span> size_t shapeEndPos   <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;)&#34;</span>, pos);

            <span style="color:#66d9ef">if</span> (shapeStartPos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos <span style="color:#f92672">&amp;&amp;</span> shapeEndPos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
                <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string shapeString <span style="color:#f92672">=</span> headerString.substr(shapeStartPos, (shapeEndPos <span style="color:#f92672">-</span> shapeStartPos) <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>);
                <span style="color:#f92672">::</span>sscanf(shapeString.c_str(), <span style="color:#e6db74">&#34;(%d,)&#34;</span>, <span style="color:#f92672">&amp;</span>axis1);

                <span style="color:#66d9ef">if</span> (axis1 <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
                    checkAxis <span style="color:#f92672">=</span> true;
                } <span style="color:#66d9ef">else</span> {
                    std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;[ERROR] Axis Error.&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
                }
            }
        }
    }

    <span style="color:#66d9ef">if</span> (checkType <span style="color:#f92672">&amp;&amp;</span> checkAxis) {
        data.resize(axis1);

        fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>data[<span style="color:#ae81ff">0</span>], <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">float</span>) <span style="color:#f92672">*</span> axis1);
    }

    <span style="color:#66d9ef">delete</span> header;
    fs.close();

    <span style="color:#66d9ef">return</span> true;
}

<span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">LoadNpy</span>(<span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">&amp;</span> filePath, std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">double</span><span style="color:#f92672">&gt;&amp;</span> data)
{
    std<span style="color:#f92672">::</span>ifstream fs(filePath.c_str(), std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>in <span style="color:#f92672">|</span> std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>binary);
    <span style="color:#66d9ef">if</span> (fs.fail()) { <span style="color:#66d9ef">return</span> false; }

    <span style="color:#75715e">// header 6 byte = 0x93NUMPY
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> magicString[<span style="color:#ae81ff">6</span>];
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>magicString, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">6</span>);
    <span style="color:#66d9ef">if</span> ((<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span>)(magicString[<span style="color:#ae81ff">0</span>]) <span style="color:#f92672">!=</span> (<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span>)<span style="color:#ae81ff">0x93</span> <span style="color:#f92672">||</span>
        magicString[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;N&#39;</span> <span style="color:#f92672">||</span> magicString[<span style="color:#ae81ff">2</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;U&#39;</span> <span style="color:#f92672">||</span>
        magicString[<span style="color:#ae81ff">3</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;M&#39;</span> <span style="color:#f92672">||</span> magicString[<span style="color:#ae81ff">4</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;P&#39;</span> <span style="color:#f92672">||</span>
        magicString[<span style="color:#ae81ff">5</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;Y&#39;</span>) {
        std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;[ERROR] Not NPY file&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
        <span style="color:#66d9ef">return</span> false;
    }

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> major, minor;
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>major, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">1</span>);
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>minor, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">1</span>);

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span> headerLength;
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>headerLength, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span>));

    <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> header <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">char</span>[headerLength];
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)header, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerLength);

    <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerString(header);

    <span style="color:#66d9ef">bool</span> checkType <span style="color:#f92672">=</span> false;
    {
        <span style="color:#66d9ef">const</span> size_t pos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;&#39;descr&#39;: &#34;</span>);
        <span style="color:#66d9ef">if</span> (pos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
            <span style="color:#66d9ef">const</span> size_t typePos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;&#39;&lt;f8&#39;&#34;</span>, pos);
            <span style="color:#66d9ef">if</span> (typePos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
                checkType <span style="color:#f92672">=</span> true;
            } <span style="color:#66d9ef">else</span> {
                std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;[ERROR] Type Error.&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
            }
        }
    }

    <span style="color:#66d9ef">bool</span> checkAxis <span style="color:#f92672">=</span> false;
    <span style="color:#66d9ef">int</span> axis1 <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
    {
        <span style="color:#66d9ef">const</span> size_t pos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;&#39;shape&#39;: &#34;</span>);
        <span style="color:#66d9ef">if</span> (pos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
            <span style="color:#66d9ef">const</span> size_t shapeStartPos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;(&#34;</span>, pos);
            <span style="color:#66d9ef">const</span> size_t shapeEndPos   <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;)&#34;</span>, pos);

            <span style="color:#66d9ef">if</span> (shapeStartPos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos <span style="color:#f92672">&amp;&amp;</span> shapeEndPos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
                <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string shapeString <span style="color:#f92672">=</span> headerString.substr(shapeStartPos, (shapeEndPos <span style="color:#f92672">-</span> shapeStartPos) <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>);
                <span style="color:#f92672">::</span>sscanf(shapeString.c_str(), <span style="color:#e6db74">&#34;(%d,)&#34;</span>, <span style="color:#f92672">&amp;</span>axis1);

                <span style="color:#66d9ef">if</span> (axis1 <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
                    checkAxis <span style="color:#f92672">=</span> true;
                } <span style="color:#66d9ef">else</span> {
                    std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;[ERROR] Axis Error.&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
                }
            }
        }
    }

    <span style="color:#66d9ef">if</span> (checkType <span style="color:#f92672">&amp;&amp;</span> checkAxis) {
        data.resize(axis1);

        fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>data[<span style="color:#ae81ff">0</span>], <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">double</span>) <span style="color:#f92672">*</span> axis1);
    }

    <span style="color:#66d9ef">delete</span> header;
    fs.close();

    <span style="color:#66d9ef">return</span> true;
}

<span style="color:#75715e">//2次元配列の読み込み
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">LoadNpy</span>(<span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">&amp;</span>filePath, std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;&gt;&amp;</span>data)
{
    std<span style="color:#f92672">::</span>ifstream fs(filePath.c_str(), std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>in <span style="color:#f92672">|</span> std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>binary);
    <span style="color:#66d9ef">if</span> (fs.fail()) { <span style="color:#66d9ef">return</span> false; }

    <span style="color:#75715e">// header 6 byte = 0x93NUMPY
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> magicString[<span style="color:#ae81ff">6</span>];
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>magicString, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">6</span>);
    <span style="color:#66d9ef">if</span> ((<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span>)(magicString[<span style="color:#ae81ff">0</span>]) <span style="color:#f92672">!=</span> (<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span>)<span style="color:#ae81ff">0x93</span> <span style="color:#f92672">||</span>
        magicString[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;N&#39;</span> <span style="color:#f92672">||</span> magicString[<span style="color:#ae81ff">2</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;U&#39;</span> <span style="color:#f92672">||</span>
        magicString[<span style="color:#ae81ff">3</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;M&#39;</span> <span style="color:#f92672">||</span> magicString[<span style="color:#ae81ff">4</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;P&#39;</span> <span style="color:#f92672">||</span>
        magicString[<span style="color:#ae81ff">5</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;Y&#39;</span>) {
        std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;[ERROR] Not NPY file&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
        <span style="color:#66d9ef">return</span> false;
    }

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> major, minor;
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>major, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">1</span>);
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>minor, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">1</span>);

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span> headerLength;
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>headerLength, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span>));

    <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> header <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">char</span>[headerLength];
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)header, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerLength);

    <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerString(header);

    <span style="color:#66d9ef">bool</span> checkType <span style="color:#f92672">=</span> false;
    {
        <span style="color:#66d9ef">const</span> size_t pos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;&#39;descr&#39;: &#34;</span>);
        <span style="color:#66d9ef">if</span> (pos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
            <span style="color:#66d9ef">const</span> size_t typePos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;&#39;&lt;i4&#39;&#34;</span>, pos);
            <span style="color:#66d9ef">if</span> (typePos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
                checkType <span style="color:#f92672">=</span> true;
            } <span style="color:#66d9ef">else</span> {
                std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;[ERROR] Type Error.&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
            }
        }
    }

    <span style="color:#66d9ef">bool</span> checkAxis <span style="color:#f92672">=</span> false;
    <span style="color:#66d9ef">int</span> axis1 <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, axis2 <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
    {
        <span style="color:#66d9ef">const</span> size_t pos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;&#39;shape&#39;: &#34;</span>);
        <span style="color:#66d9ef">if</span> (pos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
            <span style="color:#66d9ef">const</span> size_t shapeStartPos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;(&#34;</span>, pos);
            <span style="color:#66d9ef">const</span> size_t shapeEndPos   <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;)&#34;</span>, pos);

            <span style="color:#66d9ef">if</span> (shapeStartPos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos <span style="color:#f92672">&amp;&amp;</span> shapeEndPos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
                <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string shapeString <span style="color:#f92672">=</span> headerString.substr(shapeStartPos, (shapeEndPos <span style="color:#f92672">-</span> shapeStartPos) <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>);
                <span style="color:#f92672">::</span>sscanf(shapeString.c_str(), <span style="color:#e6db74">&#34;(%d, %d)&#34;</span>, <span style="color:#f92672">&amp;</span>axis1, <span style="color:#f92672">&amp;</span>axis2);

                <span style="color:#66d9ef">if</span> (axis1 <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&amp;&amp;</span> axis2 <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
                    checkAxis <span style="color:#f92672">=</span> true;
                } <span style="color:#66d9ef">else</span> {
                    std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;[ERROR] Axis Error.&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
                }
            }
        }
    }

    <span style="color:#66d9ef">if</span> (checkType <span style="color:#f92672">&amp;&amp;</span> checkAxis) {
        data.resize(axis1);
        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> axis1; i<span style="color:#f92672">++</span>) {
            data[i].resize(axis2);
        }

        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> axis1; i<span style="color:#f92672">++</span>) {
            fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>data[i][<span style="color:#ae81ff">0</span>], <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">float</span>) <span style="color:#f92672">*</span> axis2);
        }
    }

    <span style="color:#66d9ef">delete</span> header;
    fs.close();

    <span style="color:#66d9ef">return</span> true;
}

<span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">LoadNpy</span>(<span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">&amp;</span>filePath, std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">float</span><span style="color:#f92672">&gt;&gt;&amp;</span>data)
{
    std<span style="color:#f92672">::</span>ifstream fs(filePath.c_str(), std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>in <span style="color:#f92672">|</span> std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>binary);
    <span style="color:#66d9ef">if</span> (fs.fail()) { <span style="color:#66d9ef">return</span> false; }

    <span style="color:#75715e">// header 6 byte = 0x93NUMPY
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> magicString[<span style="color:#ae81ff">6</span>];
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>magicString, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">6</span>);
    <span style="color:#66d9ef">if</span> ((<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span>)(magicString[<span style="color:#ae81ff">0</span>]) <span style="color:#f92672">!=</span> (<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span>)<span style="color:#ae81ff">0x93</span> <span style="color:#f92672">||</span>
        magicString[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;N&#39;</span> <span style="color:#f92672">||</span> magicString[<span style="color:#ae81ff">2</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;U&#39;</span> <span style="color:#f92672">||</span>
        magicString[<span style="color:#ae81ff">3</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;M&#39;</span> <span style="color:#f92672">||</span> magicString[<span style="color:#ae81ff">4</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;P&#39;</span> <span style="color:#f92672">||</span>
        magicString[<span style="color:#ae81ff">5</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;Y&#39;</span>) {
        std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;[ERROR] Not NPY file&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
        <span style="color:#66d9ef">return</span> false;
    }

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> major, minor;
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>major, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">1</span>);
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>minor, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">1</span>);

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span> headerLength;
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>headerLength, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span>));

    <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> header <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">char</span>[headerLength];
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)header, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerLength);

    <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerString(header);

    <span style="color:#66d9ef">bool</span> checkType <span style="color:#f92672">=</span> false;
    {
        <span style="color:#66d9ef">const</span> size_t pos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;&#39;descr&#39;: &#34;</span>);
        <span style="color:#66d9ef">if</span> (pos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
            <span style="color:#66d9ef">const</span> size_t typePos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;&#39;&lt;f4&#39;&#34;</span>, pos);
            <span style="color:#66d9ef">if</span> (typePos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
                checkType <span style="color:#f92672">=</span> true;
            } <span style="color:#66d9ef">else</span> {
                std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;[ERROR] Type Error.&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
            }
        }
    }

    <span style="color:#66d9ef">bool</span> checkAxis <span style="color:#f92672">=</span> false;
    <span style="color:#66d9ef">int</span> axis1 <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, axis2 <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
    {
        <span style="color:#66d9ef">const</span> size_t pos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;&#39;shape&#39;: &#34;</span>);
        <span style="color:#66d9ef">if</span> (pos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
            <span style="color:#66d9ef">const</span> size_t shapeStartPos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;(&#34;</span>, pos);
            <span style="color:#66d9ef">const</span> size_t shapeEndPos   <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;)&#34;</span>, pos);

            <span style="color:#66d9ef">if</span> (shapeStartPos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos <span style="color:#f92672">&amp;&amp;</span> shapeEndPos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
                <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string shapeString <span style="color:#f92672">=</span> headerString.substr(shapeStartPos, (shapeEndPos <span style="color:#f92672">-</span> shapeStartPos) <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>);
                <span style="color:#f92672">::</span>sscanf(shapeString.c_str(), <span style="color:#e6db74">&#34;(%d, %d)&#34;</span>, <span style="color:#f92672">&amp;</span>axis1, <span style="color:#f92672">&amp;</span>axis2);

                <span style="color:#66d9ef">if</span> (axis1 <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&amp;&amp;</span> axis2 <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
                    checkAxis <span style="color:#f92672">=</span> true;
                } <span style="color:#66d9ef">else</span> {
                    std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;[ERROR] Axis Error.&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
                }
            }
        }
    }

    <span style="color:#66d9ef">if</span> (checkType <span style="color:#f92672">&amp;&amp;</span> checkAxis) {
        data.resize(axis1);
        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> axis1; i<span style="color:#f92672">++</span>) {
            data[i].resize(axis2);
        }

        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> axis1; i<span style="color:#f92672">++</span>) {
            fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>data[i][<span style="color:#ae81ff">0</span>], <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">float</span>) <span style="color:#f92672">*</span> axis2);
        }
    }

    <span style="color:#66d9ef">delete</span> header;
    fs.close();

    <span style="color:#66d9ef">return</span> true;
}

<span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">LoadNpy</span>(<span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">&amp;</span>filePath, std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">double</span><span style="color:#f92672">&gt;&gt;&amp;</span>data)
{
    std<span style="color:#f92672">::</span>ifstream fs(filePath.c_str(), std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>in <span style="color:#f92672">|</span> std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>binary);
    <span style="color:#66d9ef">if</span> (fs.fail()) { <span style="color:#66d9ef">return</span> false; }

    <span style="color:#75715e">// header 6 byte = 0x93NUMPY
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> magicString[<span style="color:#ae81ff">6</span>];
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>magicString, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">6</span>);
    <span style="color:#66d9ef">if</span> ((<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span>)(magicString[<span style="color:#ae81ff">0</span>]) <span style="color:#f92672">!=</span> (<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span>)<span style="color:#ae81ff">0x93</span> <span style="color:#f92672">||</span>
        magicString[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;N&#39;</span> <span style="color:#f92672">||</span> magicString[<span style="color:#ae81ff">2</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;U&#39;</span> <span style="color:#f92672">||</span>
        magicString[<span style="color:#ae81ff">3</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;M&#39;</span> <span style="color:#f92672">||</span> magicString[<span style="color:#ae81ff">4</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;P&#39;</span> <span style="color:#f92672">||</span>
        magicString[<span style="color:#ae81ff">5</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;Y&#39;</span>) {
        std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;[ERROR] Not NPY file&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
        <span style="color:#66d9ef">return</span> false;
    }

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> major, minor;
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>major, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">1</span>);
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>minor, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">1</span>);

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span> headerLength;
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>headerLength, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span>));

    <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> header <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">char</span>[headerLength];
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)header, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerLength);

    <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerString(header);

    <span style="color:#66d9ef">bool</span> checkType <span style="color:#f92672">=</span> false;
    {
        <span style="color:#66d9ef">const</span> size_t pos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;&#39;descr&#39;: &#34;</span>);
        <span style="color:#66d9ef">if</span> (pos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
            <span style="color:#66d9ef">const</span> size_t typePos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;&#39;&lt;f8&#39;&#34;</span>, pos);
            <span style="color:#66d9ef">if</span> (typePos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
                checkType <span style="color:#f92672">=</span> true;
            } <span style="color:#66d9ef">else</span> {
                std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;[ERROR] Type Error.&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
            }
        }
    }

    <span style="color:#66d9ef">bool</span> checkAxis <span style="color:#f92672">=</span> false;
    <span style="color:#66d9ef">int</span> axis1 <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, axis2 <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
    {
        <span style="color:#66d9ef">const</span> size_t pos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;&#39;shape&#39;: &#34;</span>);
        <span style="color:#66d9ef">if</span> (pos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
            <span style="color:#66d9ef">const</span> size_t shapeStartPos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;(&#34;</span>, pos);
            <span style="color:#66d9ef">const</span> size_t shapeEndPos   <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;)&#34;</span>, pos);

            <span style="color:#66d9ef">if</span> (shapeStartPos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos <span style="color:#f92672">&amp;&amp;</span> shapeEndPos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
                <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string shapeString <span style="color:#f92672">=</span> headerString.substr(shapeStartPos, (shapeEndPos <span style="color:#f92672">-</span> shapeStartPos) <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>);
                <span style="color:#f92672">::</span>sscanf(shapeString.c_str(), <span style="color:#e6db74">&#34;(%d, %d)&#34;</span>, <span style="color:#f92672">&amp;</span>axis1, <span style="color:#f92672">&amp;</span>axis2);

                <span style="color:#66d9ef">if</span> (axis1 <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&amp;&amp;</span> axis2 <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
                    checkAxis <span style="color:#f92672">=</span> true;
                } <span style="color:#66d9ef">else</span> {
                    std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;[ERROR] Axis Error.&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
                }
            }
        }
    }

    <span style="color:#66d9ef">if</span> (checkType <span style="color:#f92672">&amp;&amp;</span> checkAxis) {
        data.resize(axis1);
        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> axis1; i<span style="color:#f92672">++</span>) {
            data[i].resize(axis2);
        }

        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> axis1; i<span style="color:#f92672">++</span>) {
            fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>data[i][<span style="color:#ae81ff">0</span>], <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">double</span>) <span style="color:#f92672">*</span> axis2);
        }
    }

    <span style="color:#66d9ef">delete</span> header;
    fs.close();

    <span style="color:#66d9ef">return</span> true;
}

<span style="color:#75715e">// 3次元配列の読み込み
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">LoadNpy</span>(<span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">&amp;</span>filePath, std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">float</span><span style="color:#f92672">&gt;&gt;&gt;&amp;</span>data)
{
    std<span style="color:#f92672">::</span>ifstream fs(filePath.c_str(), std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>in <span style="color:#f92672">|</span> std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>binary);
    <span style="color:#66d9ef">if</span> (fs.fail()) { <span style="color:#66d9ef">return</span> false; }

    <span style="color:#75715e">// header 6 byte = 0x93NUMPY
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> magicString[<span style="color:#ae81ff">6</span>];
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>magicString, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">6</span>);
    <span style="color:#66d9ef">if</span> ((<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span>)(magicString[<span style="color:#ae81ff">0</span>]) <span style="color:#f92672">!=</span> (<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span>)<span style="color:#ae81ff">0x93</span> <span style="color:#f92672">||</span>
        magicString[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;N&#39;</span> <span style="color:#f92672">||</span> magicString[<span style="color:#ae81ff">2</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;U&#39;</span> <span style="color:#f92672">||</span>
        magicString[<span style="color:#ae81ff">3</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;M&#39;</span> <span style="color:#f92672">||</span> magicString[<span style="color:#ae81ff">4</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;P&#39;</span> <span style="color:#f92672">||</span>
        magicString[<span style="color:#ae81ff">5</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;Y&#39;</span>) {
        std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;[ERROR] Not NPY file&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
        <span style="color:#66d9ef">return</span> false;
    }

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> major, minor;
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>major, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">1</span>);
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>minor, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">1</span>);

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span> headerLength;
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>headerLength, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span>));

    <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> header <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">char</span>[headerLength];
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)header, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerLength);

    <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerString(header);

    <span style="color:#66d9ef">bool</span> checkType <span style="color:#f92672">=</span> false;
    {
        <span style="color:#66d9ef">const</span> size_t pos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;&#39;descr&#39;: &#34;</span>);
        <span style="color:#66d9ef">if</span> (pos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
            <span style="color:#66d9ef">const</span> size_t typePos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;&#39;&lt;f4&#39;&#34;</span>, pos);
            <span style="color:#66d9ef">if</span> (typePos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
                checkType <span style="color:#f92672">=</span> true;
            } <span style="color:#66d9ef">else</span> {
                std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;[ERROR] Type Error.&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
            }
        }
    }

    <span style="color:#66d9ef">bool</span> checkAxis <span style="color:#f92672">=</span> false;
    <span style="color:#66d9ef">int</span> axis1 <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, axis2 <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, axis3 <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
    {
        <span style="color:#66d9ef">const</span> size_t pos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;&#39;shape&#39;: &#34;</span>);
        <span style="color:#66d9ef">if</span> (pos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
            <span style="color:#66d9ef">const</span> size_t shapeStartPos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;(&#34;</span>, pos);
            <span style="color:#66d9ef">const</span> size_t shapeEndPos   <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;)&#34;</span>, pos);

            <span style="color:#66d9ef">if</span> (shapeStartPos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos <span style="color:#f92672">&amp;&amp;</span> shapeEndPos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
                <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string shapeString <span style="color:#f92672">=</span> headerString.substr(shapeStartPos, (shapeEndPos <span style="color:#f92672">-</span> shapeStartPos) <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>);
                <span style="color:#f92672">::</span>sscanf(shapeString.c_str(), <span style="color:#e6db74">&#34;(%d, %d, %d)&#34;</span>, <span style="color:#f92672">&amp;</span>axis1, <span style="color:#f92672">&amp;</span>axis2, <span style="color:#f92672">&amp;</span>axis3);

                <span style="color:#66d9ef">if</span> (axis1 <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&amp;&amp;</span> axis2 <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&amp;&amp;</span> axis3 <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
                    checkAxis <span style="color:#f92672">=</span> true;
                } <span style="color:#66d9ef">else</span> {
                    std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;[ERROR] Axis Error.&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
                }
            }
        }
    }

    <span style="color:#66d9ef">if</span> (checkType <span style="color:#f92672">&amp;&amp;</span> checkAxis) {
        data.resize(axis1);
        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> axis1; i<span style="color:#f92672">++</span>) {
            data[i].resize(axis2);
            <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; j <span style="color:#f92672">&lt;</span> axis2; j<span style="color:#f92672">++</span>) {
                data[i][j].resize(axis3);
            }
        }

        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> axis1; i<span style="color:#f92672">++</span>) {
            <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; j <span style="color:#f92672">&lt;</span> axis2; j<span style="color:#f92672">++</span>) {
                fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>data[i][j][<span style="color:#ae81ff">0</span>], <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">float</span>) <span style="color:#f92672">*</span> axis3);
            }
        }
    }

    <span style="color:#66d9ef">delete</span> header;
    fs.close();

    <span style="color:#66d9ef">return</span> true;
}

<span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">LoadNpy</span>(<span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">&amp;</span>filePath, std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">double</span><span style="color:#f92672">&gt;&gt;&gt;&amp;</span>data)
{
    std<span style="color:#f92672">::</span>ifstream fs(filePath.c_str(), std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>in <span style="color:#f92672">|</span> std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>binary);
    <span style="color:#66d9ef">if</span> (fs.fail()) { <span style="color:#66d9ef">return</span> false; }

    <span style="color:#75715e">// header 6 byte = 0x93NUMPY
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> magicString[<span style="color:#ae81ff">6</span>];
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>magicString, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">6</span>);
    <span style="color:#66d9ef">if</span> ((<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span>)(magicString[<span style="color:#ae81ff">0</span>]) <span style="color:#f92672">!=</span> (<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span>)<span style="color:#ae81ff">0x93</span> <span style="color:#f92672">||</span>
        magicString[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;N&#39;</span> <span style="color:#f92672">||</span> magicString[<span style="color:#ae81ff">2</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;U&#39;</span> <span style="color:#f92672">||</span>
        magicString[<span style="color:#ae81ff">3</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;M&#39;</span> <span style="color:#f92672">||</span> magicString[<span style="color:#ae81ff">4</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;P&#39;</span> <span style="color:#f92672">||</span>
        magicString[<span style="color:#ae81ff">5</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;Y&#39;</span>) {
        std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;[ERROR] Not NPY file&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
        <span style="color:#66d9ef">return</span> false;
    }

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> major, minor;
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>major, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">1</span>);
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>minor, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">1</span>);

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span> headerLength;
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>headerLength, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span>));

    <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> header <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">char</span>[headerLength];
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)header, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerLength);

    <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerString(header);

    <span style="color:#66d9ef">bool</span> checkType <span style="color:#f92672">=</span> false;
    {
        <span style="color:#66d9ef">const</span> size_t pos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;&#39;descr&#39;: &#34;</span>);
        <span style="color:#66d9ef">if</span> (pos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
            <span style="color:#66d9ef">const</span> size_t typePos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;&#39;&lt;f8&#39;&#34;</span>, pos);
            <span style="color:#66d9ef">if</span> (typePos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
                checkType <span style="color:#f92672">=</span> true;
            } <span style="color:#66d9ef">else</span> {
                std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;[ERROR] Type Error.&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
            }
        }
    }

    <span style="color:#66d9ef">bool</span> checkAxis <span style="color:#f92672">=</span> false;
    <span style="color:#66d9ef">int</span> axis1 <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, axis2 <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, axis3 <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
    {
        <span style="color:#66d9ef">const</span> size_t pos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;&#39;shape&#39;: &#34;</span>);
        <span style="color:#66d9ef">if</span> (pos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
            <span style="color:#66d9ef">const</span> size_t shapeStartPos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;(&#34;</span>, pos);
            <span style="color:#66d9ef">const</span> size_t shapeEndPos   <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;)&#34;</span>, pos);

            <span style="color:#66d9ef">if</span> (shapeStartPos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos <span style="color:#f92672">&amp;&amp;</span> shapeEndPos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
                <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string shapeString <span style="color:#f92672">=</span> headerString.substr(shapeStartPos, (shapeEndPos <span style="color:#f92672">-</span> shapeStartPos) <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>);
                <span style="color:#f92672">::</span>sscanf(shapeString.c_str(), <span style="color:#e6db74">&#34;(%d, %d, %d)&#34;</span>, <span style="color:#f92672">&amp;</span>axis1, <span style="color:#f92672">&amp;</span>axis2, <span style="color:#f92672">&amp;</span>axis3);

                <span style="color:#66d9ef">if</span> (axis1 <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&amp;&amp;</span> axis2 <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&amp;&amp;</span> axis3 <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
                    checkAxis <span style="color:#f92672">=</span> true;
                } <span style="color:#66d9ef">else</span> {
                    std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;[ERROR] Axis Error.&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
                }
            }
        }
    }

    <span style="color:#66d9ef">if</span> (checkType <span style="color:#f92672">&amp;&amp;</span> checkAxis) {
        data.resize(axis1);
        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> axis1; i<span style="color:#f92672">++</span>) {
            data[i].resize(axis2);
            <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; j <span style="color:#f92672">&lt;</span> axis2; j<span style="color:#f92672">++</span>) {
                data[i][j].resize(axis3);
            }
        }

        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> axis1; i<span style="color:#f92672">++</span>) {
            <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; j <span style="color:#f92672">&lt;</span> axis2; j<span style="color:#f92672">++</span>) {
                fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>data[i][j][<span style="color:#ae81ff">0</span>], <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">double</span>) <span style="color:#f92672">*</span> axis3);
            }
        }
    }

    <span style="color:#66d9ef">delete</span> header;
    fs.close();

    <span style="color:#66d9ef">return</span> true;
}

<span style="color:#75715e">// 4次元配列の読み込み
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">LoadNpy</span>(<span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">&amp;</span>filePath, std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;&gt;&gt;&gt;&amp;</span>data)
{
    std<span style="color:#f92672">::</span>ifstream fs(filePath.c_str(), std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>in <span style="color:#f92672">|</span> std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>binary);
    <span style="color:#66d9ef">if</span> (fs.fail()) { <span style="color:#66d9ef">return</span> false; }

    <span style="color:#75715e">// header 6 byte = 0x93NUMPY
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> magicString[<span style="color:#ae81ff">6</span>];
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>magicString, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">6</span>);
    <span style="color:#66d9ef">if</span> ((<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span>)(magicString[<span style="color:#ae81ff">0</span>]) <span style="color:#f92672">!=</span> (<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span>)<span style="color:#ae81ff">0x93</span> <span style="color:#f92672">||</span>
        magicString[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;N&#39;</span> <span style="color:#f92672">||</span> magicString[<span style="color:#ae81ff">2</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;U&#39;</span> <span style="color:#f92672">||</span>
        magicString[<span style="color:#ae81ff">3</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;M&#39;</span> <span style="color:#f92672">||</span> magicString[<span style="color:#ae81ff">4</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;P&#39;</span> <span style="color:#f92672">||</span>
        magicString[<span style="color:#ae81ff">5</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;Y&#39;</span>) {
        std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;[ERROR] Not NPY file&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
        <span style="color:#66d9ef">return</span> false;
    }

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> major, minor;
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>major, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">1</span>);
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>minor, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">1</span>);

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span> headerLength;
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>headerLength, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span>));

    <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> header <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">char</span>[headerLength];
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)header, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerLength);

    <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerString(header);

    <span style="color:#66d9ef">bool</span> checkType <span style="color:#f92672">=</span> false;
    {
        <span style="color:#66d9ef">const</span> size_t pos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;&#39;descr&#39;: &#34;</span>);
        <span style="color:#66d9ef">if</span> (pos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
            <span style="color:#66d9ef">const</span> size_t typePos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;&#39;&lt;i4&#39;&#34;</span>, pos);
            <span style="color:#66d9ef">if</span> (typePos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
                checkType <span style="color:#f92672">=</span> true;
            } <span style="color:#66d9ef">else</span> {
                std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;[ERROR] Type Error.&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
            }
        }
    }

    <span style="color:#66d9ef">bool</span> checkAxis <span style="color:#f92672">=</span> false;
    <span style="color:#66d9ef">int</span> axis1 <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, axis2 <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, axis3 <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, axis4 <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
    {
        <span style="color:#66d9ef">const</span> size_t pos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;&#39;shape&#39;: &#34;</span>);
        <span style="color:#66d9ef">if</span> (pos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
            <span style="color:#66d9ef">const</span> size_t shapeStartPos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;(&#34;</span>, pos);
            <span style="color:#66d9ef">const</span> size_t shapeEndPos   <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;)&#34;</span>, pos);

            <span style="color:#66d9ef">if</span> (shapeStartPos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos <span style="color:#f92672">&amp;&amp;</span> shapeEndPos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
                <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string shapeString <span style="color:#f92672">=</span> headerString.substr(shapeStartPos, (shapeEndPos <span style="color:#f92672">-</span> shapeStartPos) <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>);
                <span style="color:#f92672">::</span>sscanf(shapeString.c_str(), <span style="color:#e6db74">&#34;(%d, %d, %d, %d)&#34;</span>, <span style="color:#f92672">&amp;</span>axis1, <span style="color:#f92672">&amp;</span>axis2, <span style="color:#f92672">&amp;</span>axis3, <span style="color:#f92672">&amp;</span>axis4);

                <span style="color:#66d9ef">if</span> (axis1 <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&amp;&amp;</span> axis2 <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&amp;&amp;</span> axis3 <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&amp;&amp;</span> axis4 <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
                    checkAxis <span style="color:#f92672">=</span> true;
                } <span style="color:#66d9ef">else</span> {
                    std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;[ERROR] Axis Error.&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
                }
            }
        }
    }

    <span style="color:#66d9ef">if</span> (checkType <span style="color:#f92672">&amp;&amp;</span> checkAxis) {
        data.resize(axis1);
        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> axis1; i<span style="color:#f92672">++</span>) {
            data[i].resize(axis2);
            <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; j <span style="color:#f92672">&lt;</span> axis2; j<span style="color:#f92672">++</span>) {
                data[i][j].resize(axis3);
                <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> k <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; k <span style="color:#f92672">&lt;</span> axis3; k<span style="color:#f92672">++</span>) {
                    data[i][j][k].resize(axis4);
                }
            }
        }

        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> axis1; i<span style="color:#f92672">++</span>) {
            <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; j <span style="color:#f92672">&lt;</span> axis2; j<span style="color:#f92672">++</span>) {
                <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> k <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; k <span style="color:#f92672">&lt;</span> axis3; k<span style="color:#f92672">++</span>) {
                    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>data[i][j][k][<span style="color:#ae81ff">0</span>], <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">float</span>) <span style="color:#f92672">*</span> axis4);
                }
            }
        }
    }

    <span style="color:#66d9ef">delete</span> header;
    fs.close();

    <span style="color:#66d9ef">return</span> true;
}

<span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">LoadNpy</span>(<span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">&amp;</span>filePath, std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">float</span><span style="color:#f92672">&gt;&gt;&gt;&gt;&amp;</span>data)
{
    std<span style="color:#f92672">::</span>ifstream fs(filePath.c_str(), std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>in <span style="color:#f92672">|</span> std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>binary);
    <span style="color:#66d9ef">if</span> (fs.fail()) { <span style="color:#66d9ef">return</span> false; }

    <span style="color:#75715e">// header 6 byte = 0x93NUMPY
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> magicString[<span style="color:#ae81ff">6</span>];
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>magicString, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">6</span>);
    <span style="color:#66d9ef">if</span> ((<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span>)(magicString[<span style="color:#ae81ff">0</span>]) <span style="color:#f92672">!=</span> (<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span>)<span style="color:#ae81ff">0x93</span> <span style="color:#f92672">||</span>
        magicString[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;N&#39;</span> <span style="color:#f92672">||</span> magicString[<span style="color:#ae81ff">2</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;U&#39;</span> <span style="color:#f92672">||</span>
        magicString[<span style="color:#ae81ff">3</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;M&#39;</span> <span style="color:#f92672">||</span> magicString[<span style="color:#ae81ff">4</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;P&#39;</span> <span style="color:#f92672">||</span>
        magicString[<span style="color:#ae81ff">5</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;Y&#39;</span>) {
        std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;[ERROR] Not NPY file&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
        <span style="color:#66d9ef">return</span> false;
    }

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> major, minor;
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>major, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">1</span>);
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>minor, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">1</span>);

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span> headerLength;
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>headerLength, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span>));

    <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> header <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">char</span>[headerLength];
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)header, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerLength);

    <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerString(header);

    <span style="color:#66d9ef">bool</span> checkType <span style="color:#f92672">=</span> false;
    {
        <span style="color:#66d9ef">const</span> size_t pos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;&#39;descr&#39;: &#34;</span>);
        <span style="color:#66d9ef">if</span> (pos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
            <span style="color:#66d9ef">const</span> size_t typePos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;&#39;&lt;f4&#39;&#34;</span>, pos);
            <span style="color:#66d9ef">if</span> (typePos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
                checkType <span style="color:#f92672">=</span> true;
            } <span style="color:#66d9ef">else</span> {
                std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;[ERROR] Type Error.&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
            }
        }
    }

    <span style="color:#66d9ef">bool</span> checkAxis <span style="color:#f92672">=</span> false;
    <span style="color:#66d9ef">int</span> axis1 <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, axis2 <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, axis3 <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, axis4 <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
    {
        <span style="color:#66d9ef">const</span> size_t pos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;&#39;shape&#39;: &#34;</span>);
        <span style="color:#66d9ef">if</span> (pos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
            <span style="color:#66d9ef">const</span> size_t shapeStartPos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;(&#34;</span>, pos);
            <span style="color:#66d9ef">const</span> size_t shapeEndPos   <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;)&#34;</span>, pos);

            <span style="color:#66d9ef">if</span> (shapeStartPos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos <span style="color:#f92672">&amp;&amp;</span> shapeEndPos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
                <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string shapeString <span style="color:#f92672">=</span> headerString.substr(shapeStartPos, (shapeEndPos <span style="color:#f92672">-</span> shapeStartPos) <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>);
                <span style="color:#f92672">::</span>sscanf(shapeString.c_str(), <span style="color:#e6db74">&#34;(%d, %d, %d, %d)&#34;</span>, <span style="color:#f92672">&amp;</span>axis1, <span style="color:#f92672">&amp;</span>axis2, <span style="color:#f92672">&amp;</span>axis3, <span style="color:#f92672">&amp;</span>axis4);

                <span style="color:#66d9ef">if</span> (axis1 <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&amp;&amp;</span> axis2 <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&amp;&amp;</span> axis3 <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&amp;&amp;</span> axis4 <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
                    checkAxis <span style="color:#f92672">=</span> true;
                } <span style="color:#66d9ef">else</span> {
                    std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;[ERROR] Axis Error.&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
                }
            }
        }
    }

    <span style="color:#66d9ef">if</span> (checkType <span style="color:#f92672">&amp;&amp;</span> checkAxis) {
        data.resize(axis1);
        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> axis1; i<span style="color:#f92672">++</span>) {
            data[i].resize(axis2);
            <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; j <span style="color:#f92672">&lt;</span> axis2; j<span style="color:#f92672">++</span>) {
                data[i][j].resize(axis3);
                <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> k <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; k <span style="color:#f92672">&lt;</span> axis3; k<span style="color:#f92672">++</span>) {
                    data[i][j][k].resize(axis4);
                }
            }
        }

        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> axis1; i<span style="color:#f92672">++</span>) {
            <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; j <span style="color:#f92672">&lt;</span> axis2; j<span style="color:#f92672">++</span>) {
                <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> k <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; k <span style="color:#f92672">&lt;</span> axis3; k<span style="color:#f92672">++</span>) {
                    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>data[i][j][k][<span style="color:#ae81ff">0</span>], <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">float</span>) <span style="color:#f92672">*</span> axis4);
                }
            }
        }
    }

    <span style="color:#66d9ef">delete</span> header;
    fs.close();

    <span style="color:#66d9ef">return</span> true;
}

<span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">LoadNpy</span>(<span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">&amp;</span>filePath, std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">double</span><span style="color:#f92672">&gt;&gt;&gt;&gt;&amp;</span>data)
{
    std<span style="color:#f92672">::</span>ifstream fs(filePath.c_str(), std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>in <span style="color:#f92672">|</span> std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>binary);
    <span style="color:#66d9ef">if</span> (fs.fail()) { <span style="color:#66d9ef">return</span> false; }

    <span style="color:#75715e">// header 6 byte = 0x93NUMPY
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> magicString[<span style="color:#ae81ff">6</span>];
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>magicString, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">6</span>);
    <span style="color:#66d9ef">if</span> ((<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span>)(magicString[<span style="color:#ae81ff">0</span>]) <span style="color:#f92672">!=</span> (<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span>)<span style="color:#ae81ff">0x93</span> <span style="color:#f92672">||</span>
        magicString[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;N&#39;</span> <span style="color:#f92672">||</span> magicString[<span style="color:#ae81ff">2</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;U&#39;</span> <span style="color:#f92672">||</span>
        magicString[<span style="color:#ae81ff">3</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;M&#39;</span> <span style="color:#f92672">||</span> magicString[<span style="color:#ae81ff">4</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;P&#39;</span> <span style="color:#f92672">||</span>
        magicString[<span style="color:#ae81ff">5</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;Y&#39;</span>) {
        std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;[ERROR] Not NPY file&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
        <span style="color:#66d9ef">return</span> false;
    }

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> major, minor;
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>major, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">1</span>);
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>minor, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">1</span>);

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span> headerLength;
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>headerLength, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span>));

    <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span> header <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">char</span>[headerLength];
    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)header, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerLength);

    <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerString(header);

    <span style="color:#66d9ef">bool</span> checkType <span style="color:#f92672">=</span> false;
    {
        <span style="color:#66d9ef">const</span> size_t pos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;&#39;descr&#39;: &#34;</span>);
        <span style="color:#66d9ef">if</span> (pos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
            <span style="color:#66d9ef">const</span> size_t typePos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;&#39;&lt;f8&#39;&#34;</span>, pos);
            <span style="color:#66d9ef">if</span> (typePos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
                checkType <span style="color:#f92672">=</span> true;
            } <span style="color:#66d9ef">else</span> {
                std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;[ERROR] Type Error.&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
            }
        }
    }

    <span style="color:#66d9ef">bool</span> checkAxis <span style="color:#f92672">=</span> false;
    <span style="color:#66d9ef">int</span> axis1 <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, axis2 <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, axis3 <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, axis4 <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
    {
        <span style="color:#66d9ef">const</span> size_t pos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;&#39;shape&#39;: &#34;</span>);
        <span style="color:#66d9ef">if</span> (pos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
            <span style="color:#66d9ef">const</span> size_t shapeStartPos <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;(&#34;</span>, pos);
            <span style="color:#66d9ef">const</span> size_t shapeEndPos   <span style="color:#f92672">=</span> headerString.find(<span style="color:#e6db74">&#34;)&#34;</span>, pos);

            <span style="color:#66d9ef">if</span> (shapeStartPos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos <span style="color:#f92672">&amp;&amp;</span> shapeEndPos <span style="color:#f92672">!=</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">::</span>npos) {
                <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string shapeString <span style="color:#f92672">=</span> headerString.substr(shapeStartPos, (shapeEndPos <span style="color:#f92672">-</span> shapeStartPos) <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>);
                <span style="color:#f92672">::</span>sscanf(shapeString.c_str(), <span style="color:#e6db74">&#34;(%d, %d, %d, %d)&#34;</span>, <span style="color:#f92672">&amp;</span>axis1, <span style="color:#f92672">&amp;</span>axis2, <span style="color:#f92672">&amp;</span>axis3, <span style="color:#f92672">&amp;</span>axis4);

                <span style="color:#66d9ef">if</span> (axis1 <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&amp;&amp;</span> axis2 <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&amp;&amp;</span> axis3 <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&amp;&amp;</span> axis4 <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
                    checkAxis <span style="color:#f92672">=</span> true;
                } <span style="color:#66d9ef">else</span> {
                    std<span style="color:#f92672">::</span>cout <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34;[ERROR] Axis Error.&#34;</span> <span style="color:#f92672">&lt;&lt;</span> std<span style="color:#f92672">::</span>endl;
                }
            }
        }
    }

    <span style="color:#66d9ef">if</span> (checkType <span style="color:#f92672">&amp;&amp;</span> checkAxis) {
        data.resize(axis1);
        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> axis1; i<span style="color:#f92672">++</span>) {
            data[i].resize(axis2);
            <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; j <span style="color:#f92672">&lt;</span> axis2; j<span style="color:#f92672">++</span>) {
                data[i][j].resize(axis3);
                <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> k <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; k <span style="color:#f92672">&lt;</span> axis3; k<span style="color:#f92672">++</span>) {
                    data[i][j][k].resize(axis4);
                }
            }
        }

        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> axis1; i<span style="color:#f92672">++</span>) {
            <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; j <span style="color:#f92672">&lt;</span> axis2; j<span style="color:#f92672">++</span>) {
                <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> k <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; k <span style="color:#f92672">&lt;</span> axis3; k<span style="color:#f92672">++</span>) {
                    fs.read((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>data[i][j][k][<span style="color:#ae81ff">0</span>], <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">double</span>) <span style="color:#f92672">*</span> axis4);
                }
            }
        }
    }

    <span style="color:#66d9ef">delete</span> header;
    fs.close();

    <span style="color:#66d9ef">return</span> true;
}

<span style="color:#75715e">// 1次元配列の書き込み
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">SaveNpy</span>(<span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">&amp;</span>filePath, <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;&amp;</span>data)
{
    std<span style="color:#f92672">::</span>ofstream fs(filePath.c_str(), std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>binary);

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> magicString[<span style="color:#ae81ff">6</span>] <span style="color:#f92672">=</span> { <span style="color:#ae81ff">0x93</span>, <span style="color:#e6db74">&#39;N&#39;</span>, <span style="color:#e6db74">&#39;U&#39;</span>, <span style="color:#e6db74">&#39;M&#39;</span>, <span style="color:#e6db74">&#39;P&#39;</span>, <span style="color:#e6db74">&#39;Y&#39;</span> };
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)magicString, <span style="color:#66d9ef">sizeof</span>(magicString));

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> major <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, minor <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>major, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>minor, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span> headerLength <span style="color:#f92672">=</span> <span style="color:#ae81ff">118</span>;
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>headerLength, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span>));

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> axis1 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span>)data.size();

    <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerString <span style="color:#f92672">=</span> FormatString(<span style="color:#e6db74">&#34;{&#39;descr&#39;: &#39;&lt;i4&#39;, &#39;fortran_order&#39;: False, &#39;shape&#39;: (%d,), }&#34;</span>, axis1);
    fs.write((<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)headerString.c_str(), <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerString.size());

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> headerSpaceLength <span style="color:#f92672">=</span> headerLength <span style="color:#f92672">-</span> (<span style="color:#66d9ef">int</span>)headerString.size() <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">if</span> (headerSpaceLength <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
        <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerTailString <span style="color:#f92672">=</span> std<span style="color:#f92672">::</span>string(headerSpaceLength, <span style="color:#e6db74">&#39; &#39;</span>);
        fs.write((<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)headerTailString.c_str(), <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerTailString.size());
        <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span> lineFeed <span style="color:#f92672">=</span> <span style="color:#ae81ff">0x0A</span>;
        fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>lineFeed, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));
    }

    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>data[<span style="color:#ae81ff">0</span>], <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">float</span>) <span style="color:#f92672">*</span> axis1);

    <span style="color:#66d9ef">return</span> true;
}

<span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">SaveNpy</span>(<span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">&amp;</span> filePath, <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">float</span><span style="color:#f92672">&gt;&amp;</span> data)
{
    std<span style="color:#f92672">::</span>ofstream fs(filePath.c_str(), std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>binary);

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> magicString[<span style="color:#ae81ff">6</span>] <span style="color:#f92672">=</span> { <span style="color:#ae81ff">0x93</span>, <span style="color:#e6db74">&#39;N&#39;</span>, <span style="color:#e6db74">&#39;U&#39;</span>, <span style="color:#e6db74">&#39;M&#39;</span>, <span style="color:#e6db74">&#39;P&#39;</span>, <span style="color:#e6db74">&#39;Y&#39;</span> };
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)magicString, <span style="color:#66d9ef">sizeof</span>(magicString));

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> major <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, minor <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>major, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>minor, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span> headerLength <span style="color:#f92672">=</span> <span style="color:#ae81ff">118</span>;
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>headerLength, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span>));

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> axis1 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span>)data.size();

    <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerString <span style="color:#f92672">=</span> FormatString(<span style="color:#e6db74">&#34;{&#39;descr&#39;: &#39;&lt;f4&#39;, &#39;fortran_order&#39;: False, &#39;shape&#39;: (%d,), }&#34;</span>, axis1);
    fs.write((<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)headerString.c_str(), <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerString.size());

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> headerSpaceLength <span style="color:#f92672">=</span> headerLength <span style="color:#f92672">-</span> (<span style="color:#66d9ef">int</span>)headerString.size() <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">if</span> (headerSpaceLength <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
        <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerTailString <span style="color:#f92672">=</span> std<span style="color:#f92672">::</span>string(headerSpaceLength, <span style="color:#e6db74">&#39; &#39;</span>);
        fs.write((<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)headerTailString.c_str(), <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerTailString.size());
        <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span> lineFeed <span style="color:#f92672">=</span> <span style="color:#ae81ff">0x0A</span>;
        fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>lineFeed, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));
    }

    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>data[<span style="color:#ae81ff">0</span>], <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">float</span>) <span style="color:#f92672">*</span> axis1);

    <span style="color:#66d9ef">return</span> true;
}

<span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">SaveNpy</span>(<span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">&amp;</span>filePath, <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">double</span><span style="color:#f92672">&gt;&amp;</span>data)
{
    std<span style="color:#f92672">::</span>ofstream fs(filePath.c_str(), std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>binary);

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> magicString[<span style="color:#ae81ff">6</span>] <span style="color:#f92672">=</span> { <span style="color:#ae81ff">0x93</span>, <span style="color:#e6db74">&#39;N&#39;</span>, <span style="color:#e6db74">&#39;U&#39;</span>, <span style="color:#e6db74">&#39;M&#39;</span>, <span style="color:#e6db74">&#39;P&#39;</span>, <span style="color:#e6db74">&#39;Y&#39;</span> };
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)magicString, <span style="color:#66d9ef">sizeof</span>(magicString));

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> major <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, minor <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>major, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>minor, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span> headerLength <span style="color:#f92672">=</span> <span style="color:#ae81ff">118</span>;
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>headerLength, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span>));

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> axis1 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span>)data.size();

    <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerString <span style="color:#f92672">=</span> FormatString(<span style="color:#e6db74">&#34;{&#39;descr&#39;: &#39;&lt;f8&#39;, &#39;fortran_order&#39;: False, &#39;shape&#39;: (%d,), }&#34;</span>, axis1);
    fs.write((<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)headerString.c_str(), <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerString.size());

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> headerSpaceLength <span style="color:#f92672">=</span> headerLength <span style="color:#f92672">-</span> (<span style="color:#66d9ef">int</span>)headerString.size() <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">if</span> (headerSpaceLength <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
        <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerTailString <span style="color:#f92672">=</span> std<span style="color:#f92672">::</span>string(headerSpaceLength, <span style="color:#e6db74">&#39; &#39;</span>);
        fs.write((<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)headerTailString.c_str(), <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerTailString.size());
        <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span> lineFeed <span style="color:#f92672">=</span> <span style="color:#ae81ff">0x0A</span>;
        fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>lineFeed, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));
    }

    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>data[<span style="color:#ae81ff">0</span>], <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">double</span>) <span style="color:#f92672">*</span> axis1);

    <span style="color:#66d9ef">return</span> true;
}

<span style="color:#75715e">// 2次元配列の書き込み
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">SaveNpy</span>(<span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">&amp;</span> filePath, <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;&gt;&amp;</span>data)
{
    std<span style="color:#f92672">::</span>ofstream fs(filePath.c_str(), std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>binary);

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> magicString[<span style="color:#ae81ff">6</span>] <span style="color:#f92672">=</span> { <span style="color:#ae81ff">0x93</span>, <span style="color:#e6db74">&#39;N&#39;</span>, <span style="color:#e6db74">&#39;U&#39;</span>, <span style="color:#e6db74">&#39;M&#39;</span>, <span style="color:#e6db74">&#39;P&#39;</span>, <span style="color:#e6db74">&#39;Y&#39;</span> };
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)magicString, <span style="color:#66d9ef">sizeof</span>(magicString));

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> major <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, minor <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>major, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>minor, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span> headerLength <span style="color:#f92672">=</span> <span style="color:#ae81ff">118</span>;
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>headerLength, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span>));

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> axis1 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span>)data.size();
    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> axis2 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span>)data[<span style="color:#ae81ff">0</span>].size();

    <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerString <span style="color:#f92672">=</span> FormatString(<span style="color:#e6db74">&#34;{&#39;descr&#39;: &#39;&lt;i4&#39;, &#39;fortran_order&#39;: False, &#39;shape&#39;: (%d, %d), }&#34;</span>, axis1, axis2);
    fs.write((<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)headerString.c_str(), <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerString.size());

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> headerSpaceLength <span style="color:#f92672">=</span> headerLength <span style="color:#f92672">-</span> (<span style="color:#66d9ef">int</span>)headerString.size() <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">if</span> (headerSpaceLength <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
        <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerTailString <span style="color:#f92672">=</span> std<span style="color:#f92672">::</span>string(headerSpaceLength, <span style="color:#e6db74">&#39; &#39;</span>);
        fs.write((<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)headerTailString.c_str(), <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerTailString.size());
        <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span> lineFeed <span style="color:#f92672">=</span> <span style="color:#ae81ff">0x0A</span>;
        fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>lineFeed, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));
    }

    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> axis1; i<span style="color:#f92672">++</span>) {
        fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>data[i][<span style="color:#ae81ff">0</span>], <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">float</span>) <span style="color:#f92672">*</span> axis2);
    }

    <span style="color:#66d9ef">return</span> true;
}

<span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">SaveNpy</span>(<span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">&amp;</span> filePath, <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">float</span><span style="color:#f92672">&gt;&gt;&amp;</span>data)
{
    std<span style="color:#f92672">::</span>ofstream fs(filePath.c_str(), std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>binary);

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> magicString[<span style="color:#ae81ff">6</span>] <span style="color:#f92672">=</span> { <span style="color:#ae81ff">0x93</span>, <span style="color:#e6db74">&#39;N&#39;</span>, <span style="color:#e6db74">&#39;U&#39;</span>, <span style="color:#e6db74">&#39;M&#39;</span>, <span style="color:#e6db74">&#39;P&#39;</span>, <span style="color:#e6db74">&#39;Y&#39;</span> };
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)magicString, <span style="color:#66d9ef">sizeof</span>(magicString));

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> major <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, minor <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>major, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>minor, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span> headerLength <span style="color:#f92672">=</span> <span style="color:#ae81ff">118</span>;
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>headerLength, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span>));

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> axis1 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span>)data.size();
    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> axis2 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span>)data[<span style="color:#ae81ff">0</span>].size();

    <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerString <span style="color:#f92672">=</span> FormatString(<span style="color:#e6db74">&#34;{&#39;descr&#39;: &#39;&lt;f4&#39;, &#39;fortran_order&#39;: False, &#39;shape&#39;: (%d, %d), }&#34;</span>, axis1, axis2);
    fs.write((<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)headerString.c_str(), <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerString.size());

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> headerSpaceLength <span style="color:#f92672">=</span> headerLength <span style="color:#f92672">-</span> (<span style="color:#66d9ef">int</span>)headerString.size() <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">if</span> (headerSpaceLength <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
        <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerTailString <span style="color:#f92672">=</span> std<span style="color:#f92672">::</span>string(headerSpaceLength, <span style="color:#e6db74">&#39; &#39;</span>);
        fs.write((<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)headerTailString.c_str(), <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerTailString.size());
        <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span> lineFeed <span style="color:#f92672">=</span> <span style="color:#ae81ff">0x0A</span>;
        fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>lineFeed, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));
    }

    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> axis1; i<span style="color:#f92672">++</span>) {
        fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>data[i][<span style="color:#ae81ff">0</span>], <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">float</span>) <span style="color:#f92672">*</span> axis2);
    }

    <span style="color:#66d9ef">return</span> true;
}

<span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">SaveNpy</span>(<span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">&amp;</span> filePath, <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">double</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">&gt;&amp;</span> data)
{
    std<span style="color:#f92672">::</span>ofstream fs(filePath.c_str(), std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>binary);

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> magicString[<span style="color:#ae81ff">6</span>] <span style="color:#f92672">=</span> { <span style="color:#ae81ff">0x93</span>, <span style="color:#e6db74">&#39;N&#39;</span>, <span style="color:#e6db74">&#39;U&#39;</span>, <span style="color:#e6db74">&#39;M&#39;</span>, <span style="color:#e6db74">&#39;P&#39;</span>, <span style="color:#e6db74">&#39;Y&#39;</span> };
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)magicString, <span style="color:#66d9ef">sizeof</span>(magicString));

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> major <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, minor <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>major, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>minor, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span> headerLength <span style="color:#f92672">=</span> <span style="color:#ae81ff">118</span>;
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>headerLength, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span>));

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> axis1 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span>)data.size();
    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> axis2 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span>)data[<span style="color:#ae81ff">0</span>].size();

    <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerString <span style="color:#f92672">=</span> FormatString(<span style="color:#e6db74">&#34;{&#39;descr&#39;: &#39;&lt;f8&#39;, &#39;fortran_order&#39;: False, &#39;shape&#39;: (%d, %d), }&#34;</span>, axis1, axis2);
    fs.write((<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)headerString.c_str(), <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerString.size());

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> headerSpaceLength <span style="color:#f92672">=</span> headerLength <span style="color:#f92672">-</span> (<span style="color:#66d9ef">int</span>)headerString.size() <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">if</span> (headerSpaceLength <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
        <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerTailString <span style="color:#f92672">=</span> std<span style="color:#f92672">::</span>string(headerSpaceLength, <span style="color:#e6db74">&#39; &#39;</span>);
        fs.write((<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)headerTailString.c_str(), <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerTailString.size());
        <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span> lineFeed <span style="color:#f92672">=</span> <span style="color:#ae81ff">0x0A</span>;
        fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>lineFeed, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));
    }

    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> axis1; i<span style="color:#f92672">++</span>) {
        fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>data[i][<span style="color:#ae81ff">0</span>], <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">double</span>) <span style="color:#f92672">*</span> axis2);
    }

    <span style="color:#66d9ef">return</span> true;
}

<span style="color:#75715e">// 3次元配列の書き込み
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">SaveNpy</span>(<span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">&amp;</span>filePath, <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;&gt;&gt;&amp;</span> data)
{
    std<span style="color:#f92672">::</span>ofstream fs(filePath.c_str(), std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>binary);

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> magicString[<span style="color:#ae81ff">6</span>] <span style="color:#f92672">=</span> { <span style="color:#ae81ff">0x93</span>, <span style="color:#e6db74">&#39;N&#39;</span>, <span style="color:#e6db74">&#39;U&#39;</span>, <span style="color:#e6db74">&#39;M&#39;</span>, <span style="color:#e6db74">&#39;P&#39;</span>, <span style="color:#e6db74">&#39;Y&#39;</span> };
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)magicString, <span style="color:#66d9ef">sizeof</span>(magicString));

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> major <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, minor <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>major, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>minor, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span> headerLength <span style="color:#f92672">=</span> <span style="color:#ae81ff">118</span>;
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>headerLength, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span>));

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> axis1 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span>)data.size();
    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> axis2 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span>)data[<span style="color:#ae81ff">0</span>].size();
    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> axis3 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span>)data[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>].size();

    <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerString <span style="color:#f92672">=</span> FormatString(<span style="color:#e6db74">&#34;{&#39;descr&#39;: &#39;&lt;i4&#39;, &#39;fortran_order&#39;: False, &#39;shape&#39;: (%d, %d, %d), }&#34;</span>, axis1, axis2, axis3);
    fs.write((<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)headerString.c_str(), <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerString.size());

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> headerSpaceLength <span style="color:#f92672">=</span> headerLength <span style="color:#f92672">-</span> (<span style="color:#66d9ef">int</span>)headerString.size() <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">if</span> (headerSpaceLength <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
        <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerTailString <span style="color:#f92672">=</span> std<span style="color:#f92672">::</span>string(headerSpaceLength, <span style="color:#e6db74">&#39; &#39;</span>);
        fs.write((<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)headerTailString.c_str(), <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerTailString.size());
        <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span> lineFeed <span style="color:#f92672">=</span> <span style="color:#ae81ff">0x0A</span>;
        fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>lineFeed, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));
    }

    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> axis1; i<span style="color:#f92672">++</span>) {
        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; j <span style="color:#f92672">&lt;</span> axis2; j<span style="color:#f92672">++</span>) {
            fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>data[i][j][<span style="color:#ae81ff">0</span>], <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">float</span>) <span style="color:#f92672">*</span> axis3);
        }
    }

    <span style="color:#66d9ef">return</span> true;
}

<span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">SaveNpy</span>(<span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">&amp;</span>filePath, <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">float</span><span style="color:#f92672">&gt;&gt;&gt;&amp;</span>data)
{
    std<span style="color:#f92672">::</span>ofstream fs(filePath.c_str(), std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>binary);

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> magicString[<span style="color:#ae81ff">6</span>] <span style="color:#f92672">=</span> { <span style="color:#ae81ff">0x93</span>, <span style="color:#e6db74">&#39;N&#39;</span>, <span style="color:#e6db74">&#39;U&#39;</span>, <span style="color:#e6db74">&#39;M&#39;</span>, <span style="color:#e6db74">&#39;P&#39;</span>, <span style="color:#e6db74">&#39;Y&#39;</span> };
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)magicString, <span style="color:#66d9ef">sizeof</span>(magicString));

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> major <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, minor <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>major, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>minor, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span> headerLength <span style="color:#f92672">=</span> <span style="color:#ae81ff">118</span>;
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>headerLength, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span>));

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> axis1 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span>)data.size();
    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> axis2 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span>)data[<span style="color:#ae81ff">0</span>].size();
    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> axis3 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span>)data[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>].size();

    <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerString <span style="color:#f92672">=</span> FormatString(<span style="color:#e6db74">&#34;{&#39;descr&#39;: &#39;&lt;f4&#39;, &#39;fortran_order&#39;: False, &#39;shape&#39;: (%d, %d, %d), }&#34;</span>, axis1, axis2, axis3);
    fs.write((<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)headerString.c_str(), <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerString.size());

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> headerSpaceLength <span style="color:#f92672">=</span> headerLength <span style="color:#f92672">-</span> (<span style="color:#66d9ef">int</span>)headerString.size() <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">if</span> (headerSpaceLength <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
        <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerTailString <span style="color:#f92672">=</span> std<span style="color:#f92672">::</span>string(headerSpaceLength, <span style="color:#e6db74">&#39; &#39;</span>);
        fs.write((<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)headerTailString.c_str(), <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerTailString.size());
        <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span> lineFeed <span style="color:#f92672">=</span> <span style="color:#ae81ff">0x0A</span>;
        fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>lineFeed, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));
    }

    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> axis1; i<span style="color:#f92672">++</span>) {
        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; j <span style="color:#f92672">&lt;</span> axis2; j<span style="color:#f92672">++</span>) {
            fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>data[i][j][<span style="color:#ae81ff">0</span>], <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">float</span>) <span style="color:#f92672">*</span> axis3);
        }
    }

    <span style="color:#66d9ef">return</span> true;
}

<span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">SaveNpy</span>(<span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">&amp;</span> filePath, <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">double</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">&gt;</span> <span style="color:#f92672">&gt;&amp;</span> data)
{
    std<span style="color:#f92672">::</span>ofstream fs(filePath.c_str(), std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>binary);

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> magicString[<span style="color:#ae81ff">6</span>] <span style="color:#f92672">=</span> { <span style="color:#ae81ff">0x93</span>, <span style="color:#e6db74">&#39;N&#39;</span>, <span style="color:#e6db74">&#39;U&#39;</span>, <span style="color:#e6db74">&#39;M&#39;</span>, <span style="color:#e6db74">&#39;P&#39;</span>, <span style="color:#e6db74">&#39;Y&#39;</span> };
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)magicString, <span style="color:#66d9ef">sizeof</span>(magicString));

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> major <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, minor <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>major, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>minor, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span> headerLength <span style="color:#f92672">=</span> <span style="color:#ae81ff">118</span>;
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>headerLength, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span>));

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> axis1 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span>)data.size();
    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> axis2 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span>)data[<span style="color:#ae81ff">0</span>].size();
    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> axis3 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span>)data[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>].size();

    <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerString <span style="color:#f92672">=</span> FormatString(<span style="color:#e6db74">&#34;{&#39;descr&#39;: &#39;&lt;f8&#39;, &#39;fortran_order&#39;: False, &#39;shape&#39;: (%d, %d, %d), }&#34;</span>, axis1, axis2, axis3);
    fs.write((<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)headerString.c_str(), <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerString.size());

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> headerSpaceLength <span style="color:#f92672">=</span> headerLength <span style="color:#f92672">-</span> (<span style="color:#66d9ef">int</span>)headerString.size() <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">if</span> (headerSpaceLength <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
        <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerTailString <span style="color:#f92672">=</span> std<span style="color:#f92672">::</span>string(headerSpaceLength, <span style="color:#e6db74">&#39; &#39;</span>);
        fs.write((<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)headerTailString.c_str(), <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerTailString.size());
        <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span> lineFeed <span style="color:#f92672">=</span> <span style="color:#ae81ff">0x0A</span>;
        fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>lineFeed, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));
    }

    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> axis1; i<span style="color:#f92672">++</span>) {
        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; j <span style="color:#f92672">&lt;</span> axis2; j<span style="color:#f92672">++</span>) {
            fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>data[i][j][<span style="color:#ae81ff">0</span>], <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">double</span>) <span style="color:#f92672">*</span> axis3);
        }
    }

    <span style="color:#66d9ef">return</span> true;
}

<span style="color:#75715e">// 4次元配列の書き込み
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">SaveNpy</span>(<span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">&amp;</span>filePath, <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;&gt;&gt;&gt;&amp;</span>data)
{
    std<span style="color:#f92672">::</span>ofstream fs(filePath.c_str(), std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>binary);

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> magicString[<span style="color:#ae81ff">6</span>] <span style="color:#f92672">=</span> { <span style="color:#ae81ff">0x93</span>, <span style="color:#e6db74">&#39;N&#39;</span>, <span style="color:#e6db74">&#39;U&#39;</span>, <span style="color:#e6db74">&#39;M&#39;</span>, <span style="color:#e6db74">&#39;P&#39;</span>, <span style="color:#e6db74">&#39;Y&#39;</span> };
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)magicString, <span style="color:#66d9ef">sizeof</span>(magicString));

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> major <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, minor <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>major, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>minor, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span> headerLength <span style="color:#f92672">=</span> <span style="color:#ae81ff">118</span>;
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>headerLength, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span>));

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> axis1 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span>)data.size();
    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> axis2 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span>)data[<span style="color:#ae81ff">0</span>].size();
    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> axis3 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span>)data[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>].size();
    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> axis4 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span>)data[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>].size();

    <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerString <span style="color:#f92672">=</span> FormatString(<span style="color:#e6db74">&#34;{&#39;descr&#39;: &#39;&lt;i4&#39;, &#39;fortran_order&#39;: False, &#39;shape&#39;: (%d, %d, %d, %d), }&#34;</span>, axis1, axis2, axis3, axis4);
    fs.write((<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)headerString.c_str(), <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerString.size());

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> headerSpaceLength <span style="color:#f92672">=</span> headerLength <span style="color:#f92672">-</span> (<span style="color:#66d9ef">int</span>)headerString.size() <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">if</span> (headerSpaceLength <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
        <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerTailString <span style="color:#f92672">=</span> std<span style="color:#f92672">::</span>string(headerSpaceLength, <span style="color:#e6db74">&#39; &#39;</span>);
        fs.write((<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)headerTailString.c_str(), <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerTailString.size());
        <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span> lineFeed <span style="color:#f92672">=</span> <span style="color:#ae81ff">0x0A</span>;
        fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>lineFeed, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));
    }

    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> axis1; i<span style="color:#f92672">++</span>) {
        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; j <span style="color:#f92672">&lt;</span> axis2; j<span style="color:#f92672">++</span>) {
            <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> k <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; k <span style="color:#f92672">&lt;</span> axis3; k<span style="color:#f92672">++</span>) {
                fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>data[i][j][k][<span style="color:#ae81ff">0</span>], <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">float</span>) <span style="color:#f92672">*</span> axis4);
            }
        }
    }

    <span style="color:#66d9ef">return</span> true;
}

<span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">SaveNpy</span>(<span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">&amp;</span>filePath, <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">float</span><span style="color:#f92672">&gt;&gt;&gt;&gt;&amp;</span>data)
{
    std<span style="color:#f92672">::</span>ofstream fs(filePath.c_str(), std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>binary);

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> magicString[<span style="color:#ae81ff">6</span>] <span style="color:#f92672">=</span> { <span style="color:#ae81ff">0x93</span>, <span style="color:#e6db74">&#39;N&#39;</span>, <span style="color:#e6db74">&#39;U&#39;</span>, <span style="color:#e6db74">&#39;M&#39;</span>, <span style="color:#e6db74">&#39;P&#39;</span>, <span style="color:#e6db74">&#39;Y&#39;</span> };
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)magicString, <span style="color:#66d9ef">sizeof</span>(magicString));

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> major <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, minor <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>major, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>minor, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span> headerLength <span style="color:#f92672">=</span> <span style="color:#ae81ff">118</span>;
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>headerLength, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span>));

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> axis1 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span>)data.size();
    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> axis2 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span>)data[<span style="color:#ae81ff">0</span>].size();
    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> axis3 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span>)data[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>].size();
    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> axis4 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span>)data[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>].size();

    <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerString <span style="color:#f92672">=</span> FormatString(<span style="color:#e6db74">&#34;{&#39;descr&#39;: &#39;&lt;f4&#39;, &#39;fortran_order&#39;: False, &#39;shape&#39;: (%d, %d, %d, %d), }&#34;</span>, axis1, axis2, axis3, axis4);
    fs.write((<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)headerString.c_str(), <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerString.size());

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> headerSpaceLength <span style="color:#f92672">=</span> headerLength <span style="color:#f92672">-</span> (<span style="color:#66d9ef">int</span>)headerString.size() <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">if</span> (headerSpaceLength <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
        <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerTailString <span style="color:#f92672">=</span> std<span style="color:#f92672">::</span>string(headerSpaceLength, <span style="color:#e6db74">&#39; &#39;</span>);
        fs.write((<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)headerTailString.c_str(), <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerTailString.size());
        <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span> lineFeed <span style="color:#f92672">=</span> <span style="color:#ae81ff">0x0A</span>;
        fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>lineFeed, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));
    }

    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> axis1; i<span style="color:#f92672">++</span>) {
        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; j <span style="color:#f92672">&lt;</span> axis2; j<span style="color:#f92672">++</span>) {
            <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> k <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; k <span style="color:#f92672">&lt;</span> axis3; k<span style="color:#f92672">++</span>) {
                fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>data[i][j][k][<span style="color:#ae81ff">0</span>], <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">float</span>) <span style="color:#f92672">*</span> axis4);
            }
        }
    }

    <span style="color:#66d9ef">return</span> true;
}

<span style="color:#66d9ef">bool</span> <span style="color:#a6e22e">SaveNpy</span>(<span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">&amp;</span>filePath, <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>vector<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">double</span><span style="color:#f92672">&gt;&gt;&gt;&gt;&amp;</span>data)
{
    std<span style="color:#f92672">::</span>ofstream fs(filePath.c_str(), std<span style="color:#f92672">::</span>ios<span style="color:#f92672">::</span>binary);

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> magicString[<span style="color:#ae81ff">6</span>] <span style="color:#f92672">=</span> { <span style="color:#ae81ff">0x93</span>, <span style="color:#e6db74">&#39;N&#39;</span>, <span style="color:#e6db74">&#39;U&#39;</span>, <span style="color:#e6db74">&#39;M&#39;</span>, <span style="color:#e6db74">&#39;P&#39;</span>, <span style="color:#e6db74">&#39;Y&#39;</span> };
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)magicString, <span style="color:#66d9ef">sizeof</span>(magicString));

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">char</span> major <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>, minor <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>major, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>minor, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));

    <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span> headerLength <span style="color:#f92672">=</span> <span style="color:#ae81ff">118</span>;
    fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>headerLength, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">short</span>));

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> axis1 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span>)data.size();
    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> axis2 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span>)data[<span style="color:#ae81ff">0</span>].size();
    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> axis3 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span>)data[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>].size();
    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> axis4 <span style="color:#f92672">=</span> (<span style="color:#66d9ef">int</span>)data[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>].size();

    <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerString <span style="color:#f92672">=</span> FormatString(<span style="color:#e6db74">&#34;{&#39;descr&#39;: &#39;&lt;f8&#39;, &#39;fortran_order&#39;: False, &#39;shape&#39;: (%d, %d, %d, %d), }&#34;</span>, axis1, axis2, axis3, axis4);
    fs.write((<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)headerString.c_str(), <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerString.size());

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> headerSpaceLength <span style="color:#f92672">=</span> headerLength <span style="color:#f92672">-</span> (<span style="color:#66d9ef">int</span>)headerString.size() <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">if</span> (headerSpaceLength <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
        <span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string headerTailString <span style="color:#f92672">=</span> std<span style="color:#f92672">::</span>string(headerSpaceLength, <span style="color:#e6db74">&#39; &#39;</span>);
        fs.write((<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)headerTailString.c_str(), <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>) <span style="color:#f92672">*</span> headerTailString.size());
        <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span> lineFeed <span style="color:#f92672">=</span> <span style="color:#ae81ff">0x0A</span>;
        fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>lineFeed, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">char</span>));
    }

    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> axis1; i<span style="color:#f92672">++</span>) {
        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; j <span style="color:#f92672">&lt;</span> axis2; j<span style="color:#f92672">++</span>) {
            <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> k <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; k <span style="color:#f92672">&lt;</span> axis3; k<span style="color:#f92672">++</span>) {
                fs.write((<span style="color:#66d9ef">char</span><span style="color:#f92672">*</span>)<span style="color:#f92672">&amp;</span>data[i][j][k][<span style="color:#ae81ff">0</span>], <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">double</span>) <span style="color:#f92672">*</span> axis4);
            }
        }
    }

    <span style="color:#66d9ef">return</span> true;
}
</code></pre></div></details>
<p>　
　</p>
<h4 id="参考文献参考記事">参考文献・参考記事</h4>
<p><a href="https://qiita.com/ka_na_ta_n/items/608c7df3128abbf39c89">C++で .npy(NumPy Arrays) ファイルを読み書きする</a> by <a href="https://qiita.com/ka_na_ta_n">@ka_na_ta_n</a></p>

    </div>
</div><div id="social-media-share" class="has-text-centered">
	<p><i>Sharing is caring!</i></p>
	<br>
	
	<div class="share-buttons">
	    <a  href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2ft0m0ya1997.github.io%2fwhoami%2fposts%2fc%2b%2b2npy%2f"
	        onclick="socialMediaPopUp(this.href, '', 500, 500); return false;"
	        title="Share on Facebook. Opens in a new window.">
	        <img src=/whoami/img/icons/45px/facebook.png>
	    </a>

	    <a  href="https://twitter.com/intent/tweet?text=C%2b%2b%e9%85%8d%e5%88%97%e3%82%92.npy%e5%bd%a2%e5%bc%8f%e3%81%a7%e4%bf%9d%e5%ad%98%e3%81%97%e3%81%9f%e3%81%84%e7%99%96%e3%81%ae%e5%bc%b7%e3%81%84%e3%81%82%e3%81%aa%e3%81%9f%e3%81%b8%e3%80%82&url=https%3a%2f%2ft0m0ya1997.github.io%2fwhoami%2fposts%2fc%2b%2b2npy%2f"
	        onclick="socialMediaPopUp(this.href, '', 500, 500); return false;"
	        title="Share on Twitter. Opens in a new window." >
	        <img src=/whoami/img/icons/45px/twitter.png>
	    </a>

		<a  href="http://www.reddit.com/submit?url=https%3a%2f%2ft0m0ya1997.github.io%2fwhoami%2fposts%2fc%2b%2b2npy%2f"
	        onclick="socialMediaPopUp(this.href, '', 900, 500); return false;"
	        title="Share on Reddit. Opens in a new window." >
	        <img src=/whoami/img/icons/45px/reddit.png>
	    </a>

	    <a  href="http://pinterest.com/pin/create/button/?url=https%3a%2f%2ft0m0ya1997.github.io%2fwhoami%2fposts%2fc%2b%2b2npy%2f"
	        onclick="socialMediaPopUp(this.href, '', 900, 500); return false;"
	        title="Share on Pinterest. Opens in a new window." >
	        <img src=/whoami/img/icons/45px/pinterest.png>
	    </a>

	    <a  href="http://www.tumblr.com/share/link?url=https%3a%2f%2ft0m0ya1997.github.io%2fwhoami%2fposts%2fc%2b%2b2npy%2f"
	        onclick="socialMediaPopUp(this.href, '', 900, 500); return false;"
	        title="Share on Tumblr. Opens in a new window." >
	        <img src=/whoami/img/icons/45px/tumblr.png>
	    </a>

		<a  href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2ft0m0ya1997.github.io%2fwhoami%2fposts%2fc%2b%2b2npy%2f
			&title=C%2b%2b%e9%85%8d%e5%88%97%e3%82%92.npy%e5%bd%a2%e5%bc%8f%e3%81%a7%e4%bf%9d%e5%ad%98%e3%81%97%e3%81%9f%e3%81%84%e7%99%96%e3%81%ae%e5%bc%b7%e3%81%84%e3%81%82%e3%81%aa%e3%81%9f%e3%81%b8%e3%80%82&summary=%e3%81%93%e3%81%ae%e8%a8%98%e4%ba%8b%e3%81%a7%e3%81%af%ef%bc%8cC%2b%2b%e3%81%a7%e6%95%b0%e5%80%a4%e3%82%b7%e3%83%9f%e3%83%a5%e3%83%ac%e3%83%bc%e3%82%b7%e3%83%a7%e3%83%b3%e3%82%92%e8%a1%8c%e3%81%a3%e3%81%a6%e3%81%84%e3%82%8b%e6%96%b9%e5%90%91%e3%81%91%e3%81%ab%ef%bc%8cPython%20%e3%81%ae%20numpy%20%e3%81%a7%e4%bd%bf%e3%81%88%e3%82%8b.npy%e5%bd%a2%e5%bc%8f%e3%81%a7%20C%2b%2b%e9%85%8d%e5%88%97vector%20%e3%82%92%e4%bf%9d%e5%ad%98%e3%81%99%e3%82%8b%e6%96%b9%e6%b3%95%e3%82%92%e7%b4%b9%e4%bb%8b%e3%81%97%e3%81%be%e3%81%99%ef%bc%8e%20%e7%b5%90%e8%ab%96%e3%81%a0%e3%81%91%e3%82%92%e3%81%8a%e6%b1%82%e3%82%81%e3%81%ae%e6%96%b9%e3%81%af%e6%9c%80%e4%b8%8b%e9%83%a8%e3%81%ab%20numpy.hpp%20%e3%82%92%e6%8e%b2%e8%bc%89%e3%81%97%e3%81%a6%e3%81%8a%e3%82%8a%e3%81%be%e3%81%99%e3%81%ae%e3%81%a7%ef%bc%8c%e3%81%9d%e3%81%a1%e3%82%89%e3%82%92%e3%82%b3%e3%83%94%e3%83%9a%e3%81%aa%e3%82%8a%e3%81%97%e3%81%a6%e3%81%8a%e6%89%8b%e5%85%83%e3%81%a7%e4%bd%bf%e3%81%a3%e3%81%a6%e3%81%bf%e3%81%a6%e3%81%8f%e3%81%a0%e3%81%95%e3%81%84%ef%bc%8e%0a%e7%a7%81%e3%81%afMCMC%e3%81%aa%e3%81%a9%e3%81%ae%e6%95%b0%e5%80%a4%e3%82%b7%e3%83%9f%e3%83%a5%e3%83%ac%e3%83%bc%e3%82%b7%e3%83%a7%e3%83%b3%e3%82%92%e8%a1%8c%e3%81%86%e9%9a%9b%e3%81%ab%ef%bc%8c%e8%a8%88%e7%ae%97%e6%99%82%e9%96%93%e3%81%ae%e8%a6%b3%e7%82%b9%e3%81%8b%e3%82%89Python%e3%81%a7%e3%81%af%e3%81%aa%e3%81%8fC%2b%2b%e3%82%92%e4%bd%bf%e3%81%a3%e3%81%a6%e3%81%84%e3%81%be%e3%81%99%ef%bc%8e%20%e3%81%97%e3%81%8b%e3%81%97%e3%81%aa%e3%81%8c%e3%82%89%ef%bc%8c%e5%ae%9f%e9%a8%93%e7%b5%90%e6%9e%9c%e3%81%ae%e5%8f%af%e8%a6%96%e5%8c%96%e3%82%92%e8%a1%8c%e3%81%86%e3%81%ab%e3%81%af%e3%83%90%e3%82%a4%e3%83%8a%e3%83%aa%e3%82%b3%e3%83%bc%e3%83%89%e3%81%a7%e7%b5%90%e6%9e%9c%e3%82%92%e6%9b%b8%e3%81%8d%e5%87%ba%e3%81%97%e3%81%a6%ef%bc%8cgnuplot%e3%82%92%e7%94%a8%e3%81%84%e3%82%8b%e3%81%aa%e3%81%a9%ef%bc%8c%e7%a7%81%e7%9a%84%e3%81%ab%e3%81%af%e6%95%b7%e5%b1%85%e3%81%8c%e9%ab%98%e3%81%8f%e6%84%9f%e3%81%98%e3%81%a6%e3%81%84%e3%81%be%e3%81%99%ef%bc%8e%20%e4%b8%80%e6%96%b9%e3%81%a7%ef%bc%8cPython%e3%81%aematplotlib%e3%81%a8%e3%81%84%e3%81%86%e3%83%a9%e3%82%a4%e3%83%96%e3%83%a9%e3%83%aa%e3%82%92%e7%94%a8%e3%81%84%e3%82%8b%e3%81%a8%ef%bc%8c%e3%81%9d%e3%81%ae%e5%ad%a6%e7%bf%92%e3%82%b3%e3%82%b9%e3%83%88%e3%81%8c%e4%bd%8e%e3%81%84%e5%8f%8d%e9%9d%a2%ef%bc%8c%e8%ab%96%e6%96%87%e3%81%ab%e3%82%82%e4%bd%bf%e3%81%88%e3%82%8b%e3%82%88%e3%81%86%e3%81%aa%ef%bc%8c%e3%81%9d%e3%82%8c%e3%81%a3%e3%81%bd%e3%81%84%e5%9b%b3%e3%81%8c%e7%b0%a1%e5%8d%98%e3%81%ab%e6%8f%8f%e3%81%91%e3%81%a6%e3%81%97%e3%81%be%e3%81%84%e3%81%be%e3%81%99%ef%bc%8e%20%e3%81%9d%e3%81%93%e3%81%a7%ef%bc%8cC%2b%2b%e3%81%a7%e4%bd%9c%e6%88%90%e3%81%97%e3%81%9fvector%ef%bc%88%e5%a4%9a%e6%ac%a1%e5%85%83%e3%82%82%e5%90%ab%e3%82%80%ef%bc%89%e3%82%92%ef%bc%8cPython%e3%81%aenumpy%e3%81%a7%e7%b0%a1%e5%8d%98%e3%81%ab%e8%aa%ad%e3%81%bf%e6%9b%b8%e3%81%8d%e3%81%8c%e3%81%a7%e3%81%8d%e3%82%8b.npy%e5%bd%a2%e5%bc%8f%e3%81%a7%e3%83%87%e3%83%bc%e3%82%bf%e3%81%ae%e3%82%84%e3%82%8a%e5%8f%96%e3%82%8a%e3%81%8c%e3%81%a7%e3%81%8d%e3%82%8b%e3%81%a8%e6%9c%80%e9%ab%98%e3%81%aa%e3%81%ae%e3%81%a7%e3%81%99%ef%bc%8e%0a%e4%bb%8a%e5%9b%9e%e7%b4%b9%e4%bb%8b%e3%81%99%e3%82%8b%e3%81%ae%e3%81%af%ef%bc%8cC%2b%2b%20%e3%81%ae%20vector%20%e3%82%92.npy%e5%bd%a2%e5%bc%8f%e3%81%a7%e4%bf%9d%e5%ad%98%e3%81%99%e3%82%8bSaveNpy%e9%96%a2%e6%95%b0%e3%81%a8%ef%bc%8cPython%20%e3%82%92%e7%94%a8%e3%81%84%e3%81%a6%e7%94%9f%e6%88%90%e3%81%97%e3%81%9f.npy%e5%bd%a2%e5%bc%8f%e3%81%a7%e4%bf%9d%e5%ad%98%e3%81%95%e3%82%8c%e3%81%9f%e5%a4%9a%e6%ac%a1%e5%85%83%e9%85%8d%e5%88%97%e3%82%92%20C%2b%2b%20%e5%86%85%e3%81%a7%e5%a4%9a%e6%ac%a1%e5%85%83%20vector%20%e3%81%a8%e3%81%97%e3%81%a6%e8%aa%ad%e3%81%bf%e8%be%bc%e3%82%80LoadNpy%e9%96%a2%e6%95%b0%e3%81%a7%e3%81%99%ef%bc%8e%20%e5%ae%9f%e8%a3%85%e3%81%af%e3%81%93%e3%81%a1%e3%82%89%e3%81%ae%e8%a8%98%e4%ba%8b%e3%82%92%e5%a4%a7%e3%81%84%e3%81%ab%e5%8f%82%e8%80%83%e3%81%ab%e3%81%95%e3%81%9b%e3%81%a6%e3%81%84%e3%81%9f%e3%81%a0%e3%81%8d%e3%81%be%e3%81%97%e3%81%9f%ef%bc%8e%20%e6%b3%a8%e6%84%8f%e3%81%a8%e3%81%97%e3%81%a6%e3%81%af%ef%bc%8c4%e6%ac%a1%e5%85%83%e9%85%8d%e5%88%97%e3%81%be%e3%81%a7%e3%81%97%e3%81%8b%e5%af%be%e5%bf%9c%e3%81%97%e3%81%a6%e3%81%84%e3%81%aa%e3%81%84%e3%81%a7%e3%81%99%ef%bc%8e%20%e7%a7%81%e3%81%ae%e5%a0%b4%e5%90%88%ef%bc%8c4%e6%ac%a1%e5%85%83%e3%81%a7%e4%ba%8b%e8%b6%b3%e3%82%8a%e3%81%a6%e3%81%84%e3%82%8b%e3%81%ae%e3%81%a7%e3%81%99%e3%81%8c%ef%bc%8c4%e6%ac%a1%e5%85%83%e3%82%88%e3%82%8a%e3%82%82%e5%a4%a7%e3%81%8d%e3%81%aa%e6%ac%a1%e5%85%83%e3%81%ae%e9%85%8d%e5%88%97%e3%81%ae%e5%85%a5%e5%87%ba%e5%8a%9b%e3%81%8c%e5%bf%85%e8%a6%81%e3%81%a7%e3%81%97%e3%81%9f%e3%82%89%ef%bc%8c%e3%82%b3%e3%83%bc%e3%83%89%e3%82%92%e5%8f%82%e8%80%83%e3%81%ab%e6%9b%b8%e3%81%8d%e6%8f%9b%e3%81%88%e3%81%a6%e3%81%bf%e3%81%a6%e3%81%8f%e3%81%a0%e3%81%95%e3%81%84%ef%bc%8e%20%e3%81%be%e3%81%9f%ef%bc%8c%e7%a7%81%e3%81%afint%e5%9e%8b%e3%82%92%e4%bd%bf%e7%94%a8%e3%81%99%e3%82%8b%e3%81%93%e3%81%a8%e3%82%82%e3%81%82%e3%82%8b%e3%81%9f%e3%82%81%ef%bc%8c%e4%b8%8a%e8%a8%98%e3%81%ae%e8%a8%98%e4%ba%8b%e3%81%abint%e5%9e%8b%e3%81%ae%e5%85%a5%e5%87%ba%e5%8a%9b%e3%82%92%e5%8a%a0%e3%81%88%e3%81%9f%e3%82%82%e3%81%ae%e3%82%92%e7%b4%b9%e4%bb%8b%e3%81%97%e3%81%be%e3%81%99%ef%bc%8e%0a%20numpy.hpp%20%23pragma%20once%20%23include%20%26lt%3bfstream%26gt%3b%23include%20%26lt%3biostream%26gt%3b%23include%20%26lt%3bstring%26gt%3b%23include%20%26lt%3bcstdio%26gt%3b%23include%20%26lt%3bvector%26gt%3b%20namespace%20%7b%20template%20%26lt%3btypename%20.&source=rafed123.github.io"
	        onclick="socialMediaPopUp(this.href, '', 900, 500); return false;"
	        title="Share on LinkedIn. Opens in a new window." >
	        <img src=/whoami/img/icons/45px/linkedin.png>
	    </a>

	    <a  href="mailto:?subject=C%2b%2b%e9%85%8d%e5%88%97%e3%82%92.npy%e5%bd%a2%e5%bc%8f%e3%81%a7%e4%bf%9d%e5%ad%98%e3%81%97%e3%81%9f%e3%81%84%e7%99%96%e3%81%ae%e5%bc%b7%e3%81%84%e3%81%82%e3%81%aa%e3%81%9f%e3%81%b8%e3%80%82&amp;body=Check out this site https%3a%2f%2ft0m0ya1997.github.io%2fwhoami%2fposts%2fc%2b%2b2npy%2f"
	        title="Share via Email. Opens in a new window." >
	        <img src=/whoami/img/icons/45px/mail.png>
	    </a>
	</div>
</div>


<br>
<div id="disqus_thread"></div>
<script type="text/javascript">
    (function () {
        
        
        if (window.location.hostname == "localhost")
            return;

        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        var disqus_shortname = '';
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


        </div>
    </div>

<footer class="footer has-background-dark">
    <div class="content has-text-centered has-text-white">
        <p>
            © 2020 Ramium. Powered by
            <a class="has-text-light" href="https://github.com/gohugoio/hugo" target="_blank">
            Hugo</a>. Theme
            <a class="has-text-light" href="https://github.com/rafed123/ramium/" target="_blank">
                Ramium.
            </a>
        </p>
    </div>
</footer>
</body>

</html>